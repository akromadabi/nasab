(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4584],{6296:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(90425).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7686:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(90425).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},27084:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(95155),s=r(12115),l=r(73321),o=r(98500),n=r.n(o),i=r(80723),c=r(42869),d=r(7686),u=r(85118),x=r(6296);function m({params:e}){let a=(0,l.useRouter)(),[r,o]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),[h,b]=(0,s.useState)(!0),[p,g]=(0,s.useState)(""),[j,v]=(0,s.useState)([]),[y,N]=(0,s.useState)(""),[k,w]=(0,s.useState)(""),[A,C]=(0,s.useState)("MALE"),[S,E]=(0,s.useState)(""),[L,M]=(0,s.useState)(""),[$,P]=(0,s.useState)(!0),[I,T]=(0,s.useState)(""),[F,R]=(0,s.useState)(""),[W,_]=(0,s.useState)(""),[K,O]=(0,s.useState)(""),[D,z]=(0,s.useState)(""),[H,B]=(0,s.useState)(""),[G,J]=(0,s.useState)(""),[U,Z]=(0,s.useState)(""),[q,Q]=(0,s.useState)("");(0,s.useEffect)(()=>{e.then(e=>{o(e.id),V(e.id)})},[e]);let V=async e=>{try{let a=await fetch(`/api/members?baniId=${e}`),r=await a.json();v(r)}catch(e){console.error("Failed to fetch members:",e)}finally{b(!1)}},X=async e=>{e.preventDefault(),g(""),f(!0);try{let e={};D&&(e.instagram=D),H&&(e.facebook=H);let t=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({baniId:r,fullName:y,nickname:k||void 0,gender:A,birthDate:S||void 0,birthPlace:L||void 0,isAlive:$,deathDate:!$&&I?I:void 0,address:F||void 0,city:W||void 0,phoneWhatsapp:K||void 0,socialMedia:Object.keys(e).length>0?e:void 0,bio:G||void 0,fatherId:U||void 0,motherId:q||void 0})}),s=await t.json();if(!t.ok)return void g(s.error);a.push(`/dashboard/bani/${r}`),a.refresh()}catch{g("Terjadi kesalahan. Silakan coba lagi.")}finally{f(!1)}},Y=j.filter(e=>"MALE"===e.gender),ee=j.filter(e=>"FEMALE"===e.gender);return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,t.jsx)(n(),{href:`/dashboard/bani/${r}`,className:"touch-target p-2 rounded-xl hover:bg-surface-100 transition-colors",children:(0,t.jsx)(i.A,{className:"w-5 h-5 text-surface-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-surface-900",children:"Tambah Anggota"}),(0,t.jsx)("p",{className:"text-sm text-surface-500",children:"Tambahkan anggota baru ke pohon nasab"})]})]}),p&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm",children:p}),(0,t.jsxs)("form",{onSubmit:X,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center",children:(0,t.jsx)(c.A,{className:"w-5 h-5 text-primary-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Data Dasar"}),(0,t.jsx)("p",{className:"text-xs text-surface-400",children:"Informasi identitas anggota"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:["Nama Lengkap ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>N(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",placeholder:"Nama lengkap",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Nama Panggilan"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",placeholder:"Panggilan sehari-hari"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:["Jenis Kelamin ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>C("MALE"),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${"MALE"===A?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500 hover:bg-surface-50"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,t.jsx)("button",{type:"button",onClick:()=>C("FEMALE"),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${"FEMALE"===A?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500 hover:bg-surface-50"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tanggal Lahir"}),(0,t.jsx)("input",{type:"date",value:S,onChange:e=>E(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tempat Lahir"}),(0,t.jsx)("input",{type:"text",value:L,onChange:e=>M(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"Kota kelahiran"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Status"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{P(!0),T("")},className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${$?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500 hover:bg-surface-50"}`,children:"❤️ Masih Hidup"}),(0,t.jsx)("button",{type:"button",onClick:()=>P(!1),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${!$?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500 hover:bg-surface-50"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!$&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tanggal Wafat"}),(0,t.jsx)("input",{type:"date",value:I,onChange:e=>T(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all"})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gold-50 flex items-center justify-center",children:(0,t.jsx)(d.A,{className:"w-5 h-5 text-gold-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Relasi Keluarga"}),(0,t.jsx)("p",{className:"text-xs text-surface-400",children:"Hubungkan dengan orang tua"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Ayah"}),(0,t.jsxs)("select",{value:U,onChange:e=>Z(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 bg-white",disabled:h,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),Y.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Ibu"}),(0,t.jsxs)("select",{value:q,onChange:e=>Q(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 bg-white",disabled:h,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),ee.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-green-50 flex items-center justify-center",children:(0,t.jsx)(u.A,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Kontak & Alamat"}),(0,t.jsx)("p",{className:"text-xs text-surface-400",children:"Informasi kontak untuk silaturahmi"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"No. WhatsApp"}),(0,t.jsx)("input",{type:"tel",value:K,onChange:e=>O(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",placeholder:"08xxxxxxxxxx"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Instagram"}),(0,t.jsx)("input",{type:"text",value:D,onChange:e=>z(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"@username"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Facebook"}),(0,t.jsx)("input",{type:"text",value:H,onChange:e=>B(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"Nama Facebook"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Alamat"}),(0,t.jsx)("input",{type:"text",value:F,onChange:e=>R(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",placeholder:"Alamat lengkap"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Kota"}),(0,t.jsx)("input",{type:"text",value:W,onChange:e=>_(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",placeholder:"Kota domisili"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Bio / Catatan"}),(0,t.jsx)("textarea",{value:G,onChange:e=>J(e.target.value),rows:2,className:"w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base resize-none",placeholder:"Catatan tentang anggota ini"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pb-8",children:[(0,t.jsx)(n(),{href:`/dashboard/bani/${r}`,className:"touch-target flex-1 py-3.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-center hover:bg-surface-50 transition-colors",children:"Batal"}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"touch-target flex-1 py-3.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"w-5 h-5 animate-spin"}),"Menyimpan..."]}):"Simpan Anggota"})]})]})]})}},30768:(e,a,r)=>{Promise.resolve().then(r.bind(r,27084))},42869:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(90425).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},73321:(e,a,r)=>{"use strict";var t=r(74645);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}})},80723:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(90425).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},85118:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(90425).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},90425:(e,a,r)=>{"use strict";r.d(a,{A:()=>i});var t=r(12115);let s=(...e)=>e.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim(),l=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:n="",children:i,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...o,width:a,height:a,stroke:e,strokeWidth:l?24*Number(r)/Number(a):r,className:s("lucide",n),...!i&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(i)?i:[i]])),i=(e,a)=>{let r=(0,t.forwardRef)(({className:r,...o},i)=>(0,t.createElement)(n,{ref:i,iconNode:a,className:s(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...o}));return r.displayName=l(e),r}}},e=>{e.O(0,[8500,8441,3794,7358],()=>e(e.s=30768)),_N_E=e.O()}]);