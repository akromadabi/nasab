(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6793],{6296:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7686:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},20457:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(95155),s=a(12115),l=a(73321),i=a(98500),n=a.n(i),o=a(6296),d=a(80723),c=a(42869),u=a(7686),m=a(85118),x=a(68459);function h({params:e}){let t=(0,l.useRouter)(),[a,i]=(0,s.useState)(""),[h,b]=(0,s.useState)(""),[f,p]=(0,s.useState)(!0),[g,j]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[N,k]=(0,s.useState)(""),[w,A]=(0,s.useState)([]),[C,S]=(0,s.useState)(""),[M,E]=(0,s.useState)(""),[$,L]=(0,s.useState)("MALE"),[P,D]=(0,s.useState)(""),[I,T]=(0,s.useState)(""),[W,R]=(0,s.useState)(!0),[_,F]=(0,s.useState)(""),[H,O]=(0,s.useState)(""),[z,G]=(0,s.useState)(""),[K,B]=(0,s.useState)(""),[U,J]=(0,s.useState)(""),[V,Z]=(0,s.useState)(""),[q,Q]=(0,s.useState)(""),[X,Y]=(0,s.useState)(""),[ee,et]=(0,s.useState)("");(0,s.useEffect)(()=>{e.then(e=>{i(e.id),b(e.memberId),ea(e.id,e.memberId)})},[e]);let ea=async(e,t)=>{try{let[a,r]=await Promise.all([fetch(`/api/members/${t}`),fetch(`/api/members?baniId=${e}`)]),s=await a.json(),l=await r.json();S(s.fullName),E(s.nickname||""),L(s.gender),D(s.birthDate?s.birthDate.split("T")[0]:""),T(s.birthPlace||""),R(s.isAlive),F(s.deathDate?s.deathDate.split("T")[0]:""),O(s.address||""),G(s.city||""),B(s.phoneWhatsapp||""),J(s.socialMedia?.instagram||""),Z(s.socialMedia?.facebook||""),Q(s.bio||""),Y(s.fatherId||""),et(s.motherId||""),A(l.filter(e=>e.id!==t))}catch(e){console.error("Failed to fetch:",e),k("Gagal memuat data")}finally{p(!1)}},er=async e=>{e.preventDefault(),k(""),j(!0);try{let e={};U&&(e.instagram=U),V&&(e.facebook=V);let r=await fetch(`/api/members/${h}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:C,nickname:M||void 0,gender:$,birthDate:P||void 0,birthPlace:I||void 0,isAlive:W,deathDate:!W&&_?_:void 0,address:H||void 0,city:z||void 0,phoneWhatsapp:K||void 0,socialMedia:Object.keys(e).length>0?e:void 0,bio:q||void 0,fatherId:X||void 0,motherId:ee||void 0})}),s=await r.json();if(!r.ok)return void k(s.error);t.push(`/dashboard/bani/${a}/members/${h}`),t.refresh()}catch{k("Terjadi kesalahan. Silakan coba lagi.")}finally{j(!1)}},es=async()=>{if(confirm("Apakah Anda yakin ingin menghapus anggota ini? Tindakan ini tidak dapat dibatalkan.")){v(!0);try{let e=await fetch(`/api/members/${h}`,{method:"DELETE"});if(!e.ok){let t=await e.json();k(t.error);return}t.push(`/dashboard/bani/${a}`),t.refresh()}catch{k("Gagal menghapus anggota")}finally{v(!1)}}},el=w.filter(e=>"MALE"===e.gender),ei=w.filter(e=>"FEMALE"===e.gender);return f?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,r.jsx)(o.A,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,r.jsx)(n(),{href:`/dashboard/bani/${a}/members/${h}`,className:"touch-target p-2 rounded-xl hover:bg-surface-100 transition-colors",children:(0,r.jsx)(d.A,{className:"w-5 h-5 text-surface-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-surface-900",children:"Edit Anggota"}),(0,r.jsxs)("p",{className:"text-sm text-surface-500",children:["Ubah data ",C]})]})]}),N&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm",children:N}),(0,r.jsxs)("form",{onSubmit:er,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-5 h-5 text-primary-600"})}),(0,r.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Data Dasar"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:["Nama Lengkap ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Nama Panggilan"}),(0,r.jsx)("input",{type:"text",value:M,onChange:e=>E(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all text-base"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Jenis Kelamin"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>L("MALE"),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${"MALE"===$?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,r.jsx)("button",{type:"button",onClick:()=>L("FEMALE"),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${"FEMALE"===$?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tanggal Lahir"}),(0,r.jsx)("input",{type:"date",value:P,onChange:e=>D(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tempat Lahir"}),(0,r.jsx)("input",{type:"text",value:I,onChange:e=>T(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Status"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{R(!0),F("")},className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${W?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500"}`,children:"❤️ Masih Hidup"}),(0,r.jsx)("button",{type:"button",onClick:()=>R(!1),className:`touch-target flex-1 py-3 rounded-xl border text-sm font-medium transition-all ${!W?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!W&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Tanggal Wafat"}),(0,r.jsx)("input",{type:"date",value:_,onChange:e=>F(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all"})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gold-50 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-5 h-5 text-gold-600"})}),(0,r.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Relasi Keluarga"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Ayah"}),(0,r.jsxs)("select",{value:X,onChange:e=>Y(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 bg-white",children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),el.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Ibu"}),(0,r.jsxs)("select",{value:ee,onChange:e=>et(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 bg-white",children:[(0,r.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),ei.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl bg-white border border-surface-200 p-6 space-y-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-surface-100",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-green-50 flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"w-5 h-5 text-green-600"})}),(0,r.jsx)("h2",{className:"text-base font-semibold text-surface-900",children:"Kontak & Alamat"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"No. WhatsApp"}),(0,r.jsx)("input",{type:"tel",value:K,onChange:e=>B(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all text-base",placeholder:"08xxxxxxxxxx"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Instagram"}),(0,r.jsx)("input",{type:"text",value:U,onChange:e=>J(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all",placeholder:"@username"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Facebook"}),(0,r.jsx)("input",{type:"text",value:V,onChange:e=>Z(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Alamat"}),(0,r.jsx)("input",{type:"text",value:H,onChange:e=>O(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all text-base"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Kota"}),(0,r.jsx)("input",{type:"text",value:z,onChange:e=>G(e.target.value),className:"touch-target w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all text-base"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Bio / Catatan"}),(0,r.jsx)("textarea",{value:q,onChange:e=>Q(e.target.value),rows:2,className:"w-full px-4 py-3 rounded-xl border border-surface-200 text-surface-900 focus:outline-none focus:border-primary-500 transition-all text-base resize-none"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pb-8",children:[(0,r.jsx)("button",{type:"button",onClick:es,disabled:y,className:"touch-target px-4 py-3.5 rounded-xl border border-red-200 text-red-600 font-medium hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center gap-2",children:y?(0,r.jsx)(o.A,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(x.A,{className:"w-4 h-4"})}),(0,r.jsx)(n(),{href:`/dashboard/bani/${a}/members/${h}`,className:"touch-target flex-1 py-3.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-center hover:bg-surface-50 transition-colors",children:"Batal"}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"touch-target flex-1 py-3.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{className:"w-5 h-5 animate-spin"})," Menyimpan..."]}):"Simpan Perubahan"})]})]})]})}},42869:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},68459:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},73321:(e,t,a)=>{"use strict";var r=a(74645);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},80723:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},85118:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(90425).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},90114:(e,t,a)=>{Promise.resolve().then(a.bind(a,20457))},90425:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(12115);let s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:d,...c},u)=>(0,r.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:s("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...i},o)=>(0,r.createElement)(n,{ref:o,iconNode:t,className:s(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...i}));return a.displayName=l(e),a}}},e=>{e.O(0,[8500,8441,3794,7358],()=>e(e.s=90114)),_N_E=e.O()}]);