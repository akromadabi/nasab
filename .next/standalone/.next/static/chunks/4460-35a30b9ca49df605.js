"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4460],{34868:(e,s,a)=>{a.d(s,{A:()=>d});var t=a(95155),r=a(12115),l=a(6296),i=a(6962),n=a(17243),c=a(48368),o=a(33210);function d({treeContainerRef:e,baniName:s}){let[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),p=async()=>{let s=e.current;if(!s)throw Error("Tree element not found");let t=s.parentElement,r=s.querySelector("[style*='transform']"),l=r?.style.transform||"",i=t?.style.overflow||"",n=t?.style.maxHeight||"",c=t?.style.height||"";try{r&&(r.style.transform="scale(1)"),t&&(t.style.overflow="visible",t.style.maxHeight="none",t.style.height="auto"),await new Promise(e=>setTimeout(e,100));let{toPng:e}=await a.e(8634).then(a.bind(a,28634));return await e(s,{backgroundColor:"#ffffff",pixelRatio:2,cacheBust:!0})}finally{r&&(r.style.transform=l),t&&(t.style.overflow=i,t.style.maxHeight=n,t.style.height=c)}},b=async()=>{x(!0),f("");try{let e=await p(),a=document.createElement("a");a.download=`${s.replace(/\s+/g,"-")}-tree.png`,a.href=e,a.click()}catch(e){console.error("Export image error:",e),f("Gagal mengekspor gambar")}finally{x(!1),u(!1)}},g=async()=>{x(!0),f("");try{let e=await p(),{jsPDF:t}=await Promise.all([a.e(5033),a.e(3930),a.e(4233)]).then(a.bind(a,18831)),r=new Image;await new Promise((s,a)=>{r.onload=()=>s(),r.onerror=()=>a(Error("Failed to load image")),r.src=e});let l=r.naturalWidth,i=r.naturalHeight,n=new t({orientation:l>i?"landscape":"portrait",unit:"mm"}),c=n.internal.pageSize.getWidth(),o=n.internal.pageSize.getHeight();n.setFontSize(16),n.setFont("helvetica","bold"),n.text(s,c/2,15,{align:"center"}),n.setFontSize(10),n.setFont("helvetica","normal"),n.text("Silsilah Keluarga — Jejak Nasab",c/2,22,{align:"center"});let d=c-20,x=o-30-10,m=d,u=i/l*d;u>x&&(u=x,m=l/i*x);let h=(c-m)/2;n.addImage(e,"PNG",h,30,m,u),n.setFontSize(8),n.setTextColor(150);let f=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});n.text(`Dicetak dari Jejak Nasab — ${f}`,c/2,o-5,{align:"center"}),n.save(`${s.replace(/\s+/g,"-")}-tree.pdf`)}catch(e){console.error("Export PDF error:",e),f("Gagal mengekspor PDF")}finally{x(!1),u(!1)}};return(0,t.jsxs)("div",{className:"relative sm:inline-block",children:[(0,t.jsxs)("button",{onClick:()=>{u(!m),f("")},disabled:d,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-primary-600 text-white font-medium text-xs hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20 disabled:opacity-50",children:[d?(0,t.jsx)(l.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,t.jsx)(i.A,{className:"w-3.5 h-3.5"}),"Ekspor"]}),m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-52 rounded-xl bg-white border border-surface-200 shadow-xl z-50 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:b,disabled:d,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-surface-700 hover:bg-surface-50 transition-colors disabled:opacity-50",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 text-blue-500"}),"Simpan sebagai PNG"]}),(0,t.jsxs)("button",{onClick:g,disabled:d,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-surface-700 hover:bg-surface-50 transition-colors border-t border-surface-100 disabled:opacity-50",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 text-red-500"}),"Simpan sebagai PDF"]})]})]}),h&&(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-2 p-3 rounded-xl bg-red-50 border border-red-200 text-red-600 text-xs flex items-start gap-2 z-50 max-w-[200px]",children:[(0,t.jsx)(o.A,{className:"w-3 h-3 flex-shrink-0 mt-0.5 cursor-pointer",onClick:()=>f("")}),h]})]})}},40980:(e,s,a)=>{a.d(s,{rr:()=>t});function t(e){let s=e.replace(/\D/g,"");return s.startsWith("0")&&(s="62"+s.substring(1)),`https://wa.me/${s}`}},84460:(e,s,a)=>{a.d(s,{default:()=>U});var t=a(95155),r=a(12115),l=a(22164),i=a(33210),n=a(51914),c=a(78390),o=a(7686),d=a(7810),x=a(6296),m=a(42869),u=a(85118),h=a(41641),f=a(21362),p=a(9921),b=a(66088),g=a(61878),j=a(57420),N=a(24538),v=a(89823),y=a(68459),w=a(74055),k=a(38194),A=a(89363),C=a(69220),S=a(22651),E=a(60241),L=a(24371),M=a(45752),$=a(92451),P=a(25777),T=a(94514),I=a(67635),W=a(25237),D=a(72140),z=a(40980),O=a(34868);let F=[{key:"instagram",label:"Instagram",placeholder:"@username",color:"text-pink-600",bg:"bg-pink-50"},{key:"facebook",label:"Facebook",placeholder:"Nama atau URL",color:"text-blue-600",bg:"bg-blue-50"},{key:"tiktok",label:"TikTok",placeholder:"@username",color:"text-surface-900",bg:"bg-surface-100"},{key:"twitter",label:"Twitter / X",placeholder:"@username",color:"text-sky-500",bg:"bg-sky-50"},{key:"youtube",label:"YouTube",placeholder:"Channel URL",color:"text-red-600",bg:"bg-red-50"},{key:"linkedin",label:"LinkedIn",placeholder:"URL profil",color:"text-blue-700",bg:"bg-blue-50"}];function R(e,s){let a=s.trim();if(a.startsWith("http://")||a.startsWith("https://"))return a;let t=a.replace(/^@/,"");switch(e){case"instagram":return`https://instagram.com/${t}`;case"facebook":return`https://facebook.com/${t}`;case"tiktok":return`https://tiktok.com/@${t}`;case"twitter":return`https://x.com/${t}`;case"youtube":return`https://youtube.com/${t.startsWith("@")?t:"@"+t}`;case"linkedin":return`https://linkedin.com/in/${t}`;default:return"#"}}function H({platform:e,className:s="w-4 h-4"}){switch(e){case"instagram":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})});case"facebook":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})});case"tiktok":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})});case"twitter":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})});case"youtube":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})});case"linkedin":return(0,t.jsx)("svg",{className:s,viewBox:"0 0 24 24",fill:"currentColor",children:(0,t.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})});default:return(0,t.jsx)(l.A,{className:s})}}function B({entries:e,onChange:s,inputClass:a,labelClass:l}){let[c,o]=(0,r.useState)(!1),d=e.map(e=>e.key),x=F.filter(e=>!d.includes(e.key));return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:l,children:"Sosial Media"}),e.map((r,l)=>{let n=F.find(e=>e.key===r.key);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-lg ${n?.bg||"bg-surface-100"} ${n?.color||"text-surface-500"} flex items-center justify-center flex-shrink-0`,children:(0,t.jsx)(H,{platform:r.key,className:"w-4 h-4"})}),(0,t.jsx)("input",{type:"text",value:r.value,onChange:a=>{var t;let r;return t=a.target.value,void((r=[...e])[l]={...r[l],value:t},s(r))},className:`${a} flex-1`,placeholder:n?.placeholder||""}),(0,t.jsx)("button",{type:"button",onClick:()=>{s(e.filter((e,s)=>s!==l))},className:"w-8 h-8 rounded-lg border border-surface-200 text-surface-400 flex items-center justify-center hover:bg-red-50 hover:text-red-500 hover:border-red-200 transition-colors flex-shrink-0",children:(0,t.jsx)(i.A,{className:"w-3.5 h-3.5"})})]},r.key)}),x.length>0&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>o(!c),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-dashed border-surface-300 text-xs text-surface-500 font-medium hover:border-primary-400 hover:text-primary-600 transition-colors",children:[(0,t.jsx)(n.A,{className:"w-3.5 h-3.5"}),"Tambah Sosial Media"]}),c&&(0,t.jsx)("div",{className:"absolute left-0 top-full mt-1 w-56 bg-white rounded-xl border border-surface-200 shadow-xl z-20 p-1 animate-scale-in",children:x.map(a=>(0,t.jsxs)("button",{type:"button",onClick:()=>{s([...e,{key:a.key,value:""}]),o(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2 rounded-lg hover:bg-surface-50 transition-colors text-left",children:[(0,t.jsx)("div",{className:`w-7 h-7 rounded-md ${a.bg} ${a.color} flex items-center justify-center`,children:(0,t.jsx)(H,{platform:a.key,className:"w-3.5 h-3.5"})}),(0,t.jsx)("span",{className:"text-sm text-surface-700 font-medium",children:a.label})]},a.key))})]})]})}function V({node:e,onSelect:s,onClose:a}){return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:a,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-xs bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"px-4 pt-4 pb-3 border-b border-surface-100",children:[(0,t.jsx)("p",{className:"text-xs text-surface-400 font-medium",children:"Tambah keluarga untuk"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-surface-900 truncate",children:e.fullName})]}),(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsxs)("button",{onClick:()=>s("child"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-primary-50 transition-colors",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg bg-primary-100 flex items-center justify-center",children:(0,t.jsx)(c.A,{className:"w-4.5 h-4.5 text-primary-600"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Anak"}),(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Anak kandung"})]})]}),(0,t.jsxs)("button",{onClick:()=>s("spouse"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-pink-50 transition-colors",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg bg-pink-100 flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"w-4.5 h-4.5 text-pink-600"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Pasangan"}),(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Suami / Istri"})]})]}),(0,t.jsxs)("button",{onClick:()=>s("sibling"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-blue-50 transition-colors",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,t.jsx)(d.A,{className:"w-4.5 h-4.5 text-blue-600"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Saudara"}),(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Saudara kandung"})]})]})]}),(0,t.jsx)("div",{className:"px-2 pb-2",children:(0,t.jsx)("button",{onClick:a,className:"w-full py-2.5 rounded-xl text-sm font-medium text-surface-400 hover:bg-surface-50 transition-colors",children:"Batal"})})]})]})}function G({context:e,allMembers:s,baniId:a,onClose:l,onSuccess:c}){let[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,f]=(0,r.useState)("MALE"),[p,b]=(0,r.useState)(!0),[g,j]=(0,r.useState)(!1),[N,v]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),{type:k,member:A}=e,C=[];"MALE"===A.gender&&A.marriagesAsHusband?A.marriagesAsHusband.forEach(e=>C.push(e.wife)):"FEMALE"===A.gender&&A.marriagesAsWife&&A.marriagesAsWife.forEach(e=>C.push(e.husband));let S=1===C.length,E=C.length>1;(0,r.useEffect)(()=>{"child"===k&&S&&w(C[0].id)},[k,S]);let L="child"===k?`Tambah Anak ${A.fullName}`:"spouse"===k?`Tambah Pasangan ${A.fullName}`:`Tambah Saudara ${A.fullName}`,M="child"===k?"Anggota baru akan menjadi anak dari orang ini":"spouse"===k?"Anggota baru akan menjadi pasangan orang ini":"Anggota baru akan memiliki orang tua yang sama";(0,r.useEffect)(()=>{"spouse"===k&&f("MALE"===A.gender?"FEMALE":"MALE")},[k,A.gender]);let $="child"===k?C.length>0?C.map(e=>({id:e.id,fullName:e.fullName,gender:e.gender,generation:0})):"MALE"===A.gender?s.filter(e=>"FEMALE"===e.gender):s.filter(e=>"MALE"===e.gender):[],P=async e=>{if(e.preventDefault(),o.trim()){j(!0),v("");try{let e,s;"child"===k?"MALE"===A.gender?(e=A.id,s=y||void 0):(s=A.id,e=y||void 0):"sibling"===k&&(e=A.fatherId||void 0,s=A.motherId||void 0);let t=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({baniId:a,fullName:o.trim(),nickname:m.trim()||void 0,gender:h,isAlive:p,fatherId:e,motherId:s})}),r=await t.json();if(!t.ok)return void v(r.error||"Gagal menyimpan");if("spouse"===k){let e="MALE"===A.gender?A.id:r.id,s="FEMALE"===A.gender?A.id:r.id;(await fetch("/api/marriages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({husbandId:e,wifeId:s})})).ok||console.error("Failed to create marriage, but member was created")}c()}catch{v("Terjadi kesalahan. Silakan coba lagi.")}finally{j(!1)}}};return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:l}),(0,t.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-scale-in",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white rounded-t-2xl border-b border-surface-100 p-5 flex items-start justify-between z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:L}),(0,t.jsx)("p",{className:"text-xs text-surface-400 mt-0.5",children:M})]}),(0,t.jsx)("button",{onClick:l,className:"p-1.5 rounded-lg hover:bg-surface-100 transition-colors text-surface-400",children:(0,t.jsx)(i.A,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:P,className:"p-5 space-y-4",children:[N&&(0,t.jsx)("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm",children:N}),"child"===k&&(0,t.jsx)("div",{className:"p-3 rounded-xl bg-primary-50 border border-primary-100",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-primary-700",children:["MALE"===A.gender?"\uD83D\uDC68 Ayah":"\uD83D\uDC69 Ibu",":"," ",(0,t.jsx)("span",{className:"font-bold",children:A.fullName})]})}),"sibling"===k&&(A.fatherId||A.motherId)&&(0,t.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-100 space-y-1",children:[(0,t.jsxs)("p",{className:"text-xs text-blue-600",children:["Orang tua yang sama dengan ",A.fullName,":"]}),A.fatherId&&(0,t.jsxs)("p",{className:"text-xs font-medium text-blue-700",children:["\uD83D\uDC68 Ayah: ",s.find(e=>e.id===A.fatherId)?.fullName||"—"]}),A.motherId&&(0,t.jsxs)("p",{className:"text-xs font-medium text-blue-700",children:["\uD83D\uDC69 Ibu: ",s.find(e=>e.id===A.motherId)?.fullName||"—"]})]}),"spouse"===k&&(0,t.jsx)("div",{className:"p-3 rounded-xl bg-pink-50 border border-pink-100",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-pink-700",children:["\uD83D\uDC91 Pasangan dari ",(0,t.jsx)("span",{className:"font-bold",children:A.fullName})]})}),"child"===k&&S&&(0,t.jsx)("div",{className:"p-3 rounded-xl bg-primary-50 border border-primary-100",children:(0,t.jsxs)("p",{className:"text-xs font-medium text-primary-700",children:["MALE"===A.gender?"\uD83D\uDC69 Ibu":"\uD83D\uDC68 Ayah",":"," ",(0,t.jsx)("span",{className:"font-bold",children:C[0].fullName})]})}),"child"===k&&E&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"MALE"===A.gender?"Ibu":"Ayah"}),(0,t.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 focus:outline-none focus:border-primary-500 bg-white",children:[(0,t.jsxs)("option",{value:"",children:["— Pilih ","MALE"===A.gender?"Ibu":"Ayah"," —"]}),$.map(e=>(0,t.jsx)("option",{value:e.id,children:e.fullName},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:["Nama Lengkap ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 bg-white",placeholder:"Nama lengkap",autoFocus:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"Nama Panggilan"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 bg-white",placeholder:"Panggilan sehari-hari"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:["Jenis Kelamin ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>f("MALE"),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${"MALE"===h?"bg-blue-50 text-blue-700 border-2 border-blue-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,t.jsx)("button",{type:"button",onClick:()=>f("FEMALE"),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${"FEMALE"===h?"bg-pink-50 text-pink-700 border-2 border-pink-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"Status"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b(!0),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${p?"bg-green-50 text-green-700 border-2 border-green-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"❤️ Hidup"}),(0,t.jsx)("button",{type:"button",onClick:()=>b(!1),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${!p?"bg-surface-100 text-surface-700 border-2 border-surface-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDD4A️ Wafat"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,t.jsx)("button",{type:"submit",disabled:g||!o.trim(),className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"w-4 h-4"}),"Simpan"]})})]})]})]})]})}function K({node:e,level:s,expanded:a,toggleExpand:r,selectedId:l,onSelect:i,onShowQuickMenu:c,canEdit:o=!0,orientation:d}){let x,g=a.has(e.id),j=e.children.length>0,N=l===e.id,v="HORIZONTAL"===d,y=(0,t.jsxs)("div",{onClick:()=>i(e.id),className:`tree-node relative cursor-pointer rounded-xl sm:rounded-2xl border-2 p-2 sm:p-3 w-28 sm:w-44 text-center transition-all group ${N?"border-primary-500 bg-primary-50 shadow-lg shadow-primary-500/20":e.isAlive?"MALE"===e.gender?"border-blue-200 bg-white hover:border-blue-400":"border-pink-200 bg-white hover:border-pink-400":"border-surface-200 bg-surface-50 opacity-80 hover:opacity-100"}`,children:[(0,t.jsx)("div",{className:`w-9 h-9 sm:w-12 sm:h-12 rounded-full mx-auto mb-1 sm:mb-2 flex items-center justify-center ${"MALE"===e.gender?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:e.photo?(0,t.jsx)("img",{src:e.photo,alt:e.fullName,className:"w-9 h-9 sm:w-12 sm:h-12 rounded-full object-cover"}):(0,t.jsx)(m.A,{className:"w-4 h-4 sm:w-6 sm:h-6"})}),(0,t.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-surface-900 truncate",children:e.fullName}),e.nickname&&(0,t.jsxs)("p",{className:"text-[10px] text-surface-400 truncate",children:["(",e.nickname,")"]}),!e.isAlive&&(0,t.jsx)("span",{className:"inline-block text-[10px] px-1.5 py-0.5 rounded bg-surface-200 text-surface-500 mt-1",children:"Alm."}),(x=[],("MALE"===e.gender&&e.marriagesAsHusband?e.marriagesAsHusband.forEach(e=>x.push(e.wife.fullName)):"FEMALE"===e.gender&&e.marriagesAsWife&&e.marriagesAsWife.forEach(e=>x.push(e.husband.fullName)),0===x.length)?null:(0,t.jsx)("div",{className:"mt-1.5 space-y-0.5",children:x.map((s,a)=>(0,t.jsxs)("p",{className:`text-[9px] sm:text-[10px] truncate px-1.5 py-0.5 rounded-full ${"MALE"===e.gender?"bg-pink-50 text-pink-500":"bg-blue-50 text-blue-500"}`,children:["\uD83D\uDC91 ",s]},a))})),N&&o&&e.phoneWhatsapp&&(0,t.jsx)("a",{href:(0,z.rr)(e.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center shadow-md hover:bg-green-400 transition-all animate-scale-in z-10",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})}),N&&o&&(0,t.jsx)("button",{onClick:s=>{s.stopPropagation(),c(e)},className:"absolute -top-2 -left-2 z-30 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center shadow-md hover:bg-emerald-400 transition-all hover:scale-110 animate-scale-in",title:"Tambah keluarga",children:(0,t.jsx)(n.A,{className:"w-3 h-3"})}),j&&(0,t.jsx)("button",{onClick:s=>{s.stopPropagation(),r(e.id)},className:v?"absolute top-1/2 -right-3 -translate-y-1/2 w-6 h-6 rounded-full bg-primary-500 text-white flex items-center justify-center shadow-md hover:bg-primary-400 transition-colors text-xs":"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full bg-primary-500 text-white flex items-center justify-center shadow-md hover:bg-primary-400 transition-colors text-xs",children:v?g?(0,t.jsx)(h.A,{className:"w-3.5 h-3.5"}):(0,t.jsx)(f.A,{className:"w-3.5 h-3.5"}):g?(0,t.jsx)(p.A,{className:"w-3.5 h-3.5"}):(0,t.jsx)(b.A,{className:"w-3.5 h-3.5"})})]});return v?(0,t.jsxs)("div",{className:"flex flex-row items-center",children:[y,j&&g&&(0,t.jsxs)("div",{className:"flex flex-row items-center",children:[(0,t.jsx)("div",{className:"h-0.5 w-8 bg-gradient-to-r from-primary-300 to-primary-200"}),(0,t.jsx)("div",{className:"flex flex-col",children:e.children.map((n,x)=>(0,t.jsxs)("div",{className:"flex flex-row items-center relative",children:[e.children.length>1&&(0,t.jsxs)("div",{className:"flex flex-col w-0.5 self-stretch",children:[(0,t.jsx)("div",{className:`flex-1 w-full ${0===x?"bg-transparent":"bg-primary-200"}`}),(0,t.jsx)("div",{className:`flex-1 w-full ${x===e.children.length-1?"bg-transparent":"bg-primary-200"}`})]}),(0,t.jsx)("div",{className:"h-0.5 w-6 bg-primary-200"}),(0,t.jsx)("div",{className:"py-2 sm:py-3",children:(0,t.jsx)(K,{node:n,level:s+1,expanded:a,toggleExpand:r,selectedId:l,onSelect:i,onShowQuickMenu:c,canEdit:o,orientation:d})})]},n.id))})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[y,j&&g&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-0.5 h-8 bg-gradient-to-b from-primary-300 to-primary-200"}),(0,t.jsx)("div",{className:"flex",children:e.children.map((n,x)=>(0,t.jsxs)("div",{className:"flex flex-col items-center relative",children:[e.children.length>1&&(0,t.jsxs)("div",{className:"flex w-full h-0.5",children:[(0,t.jsx)("div",{className:`flex-1 h-full ${0===x?"bg-transparent":"bg-primary-200"}`}),(0,t.jsx)("div",{className:`flex-1 h-full ${x===e.children.length-1?"bg-transparent":"bg-primary-200"}`})]}),(0,t.jsx)("div",{className:"w-0.5 h-6 bg-primary-200"}),(0,t.jsx)("div",{className:"px-2 sm:px-3",children:(0,t.jsx)(K,{node:n,level:s+1,expanded:a,toggleExpand:r,selectedId:l,onSelect:i,onShowQuickMenu:c,canEdit:o,orientation:d})})]},n.id))})]})]})}function Z({members:e,baniId:s,onSelectMember:a}){let[l,i]=(0,r.useState)(""),[n,c]=(0,r.useState)(null),o=Array.from({length:Math.max(...e.map(e=>e.generation),0)+1},(e,s)=>s),d=e.filter(e=>{let s=e.fullName.toLowerCase().includes(l.toLowerCase())||e.nickname?.toLowerCase().includes(l.toLowerCase())||e.city?.toLowerCase().includes(l.toLowerCase()),a=null===n||e.generation===n;return s&&a}),x=d.reduce((e,s)=>(e[s.generation]||(e[s.generation]=[]),e[s.generation].push(s),e),{});return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),(0,t.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"Cari nama..."})]}),(0,t.jsxs)("select",{value:null===n?"":n,onChange:e=>c(""===e.target.value?null:parseInt(e.target.value)),className:"px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-700 focus:outline-none focus:border-primary-500 bg-white min-w-[100px]",children:[(0,t.jsx)("option",{value:"",children:"Semua"}),o.map(e=>(0,t.jsxs)("option",{value:e,children:["Gen ",e+1]},e))]})]}),Object.keys(x).sort((e,s)=>Number(e)-Number(s)).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider mb-2",children:["Generasi ",Number(e)+1]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x[Number(e)].map(e=>(0,t.jsxs)("button",{onClick:()=>a(e),className:"group p-3 rounded-xl bg-white border border-surface-200 hover:border-primary-200 hover:shadow-md transition-all flex items-center gap-3 text-left w-full",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${"MALE"===e.gender?"bg-blue-50 text-blue-600":"bg-pink-50 text-pink-600"} ${!e.isAlive?"opacity-60":""}`,children:e.photo?(0,t.jsx)("img",{src:e.photo,alt:e.fullName,className:"w-10 h-10 rounded-full object-cover"}):(0,t.jsx)(m.A,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-surface-900 truncate",children:e.fullName}),!e.isAlive&&(0,t.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-surface-100 text-surface-400 flex-shrink-0",children:"Alm."})]}),e.nickname&&(0,t.jsx)("p",{className:"text-xs text-surface-400 truncate",children:e.nickname}),e.city&&(0,t.jsxs)("p",{className:"text-[11px] text-surface-400 mt-0.5",children:["\uD83D\uDCCD ",e.city]})]}),(0,t.jsx)(f.A,{className:"w-4 h-4 text-surface-300 group-hover:text-primary-500 transition-colors flex-shrink-0"})]},e.id))})]},e)),0===d.length&&(0,t.jsxs)("div",{className:"text-center py-12 rounded-xl bg-white border border-surface-200",children:[(0,t.jsx)(m.A,{className:"w-10 h-10 text-surface-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-surface-500 text-sm",children:"Tidak ada anggota ditemukan"})]})]})}function J({member:e,baniId:s,onClose:a,onEdit:r}){let l=e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch{return e}},n=e.socialMedia,c=n?Object.entries(n).filter(([,e])=>e):[],o=e.phoneWhatsapp||c.length>0,d=e.address||e.city,x=e.birthDate||e.deathDate,h=e.father||e.mother;return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:a,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:`relative px-5 pt-5 pb-4 flex-shrink-0 ${"MALE"===e.gender?"bg-gradient-to-br from-blue-50 to-blue-100/50":"bg-gradient-to-br from-pink-50 to-pink-100/50"}`,children:[(0,t.jsx)("button",{onClick:a,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-white/80 flex items-center justify-center hover:bg-white transition-colors",children:(0,t.jsx)(i.A,{className:"w-4 h-4 text-surface-500"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-xl font-bold ${"MALE"===e.gender?"bg-blue-200/60 text-blue-600":"bg-pink-200/60 text-pink-600"} ${!e.isAlive?"opacity-60":""}`,children:e.photo?(0,t.jsx)("img",{src:e.photo,alt:e.fullName,className:"w-16 h-16 rounded-2xl object-cover"}):(0,t.jsx)(m.A,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-surface-900",children:e.fullName}),!e.isAlive&&(0,t.jsx)("span",{className:"px-1.5 py-0.5 rounded-lg bg-surface-200/80 text-surface-500 text-[10px] font-medium",children:"\uD83D\uDD4A️ Almarhum/ah"})]}),e.nickname&&(0,t.jsxs)("p",{className:"text-sm text-surface-500",children:['"',e.nickname,'"']}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:[(0,t.jsx)("span",{className:`text-[11px] px-2 py-0.5 rounded-full font-medium ${"MALE"===e.gender?"bg-blue-200/60 text-blue-700":"bg-pink-200/60 text-pink-700"}`,children:"MALE"===e.gender?"\uD83D\uDC68 Laki-laki":"\uD83D\uDC69 Perempuan"}),(0,t.jsxs)("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-primary-100/60 text-primary-700 font-medium",children:["Generasi ",e.generation+1]})]})]})]}),e.bio&&(0,t.jsx)("p",{className:"mt-3 text-sm text-surface-600 leading-relaxed",children:e.bio})]}),(0,t.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4 space-y-4",children:[x&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,t.jsx)(j.A,{className:"w-3.5 h-3.5"})," Tanggal"]}),e.birthDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Tanggal Lahir"}),(0,t.jsxs)("p",{className:"text-sm text-surface-900 font-medium",children:[l(e.birthDate),e.birthPlace?` — ${e.birthPlace}`:""]})]}),e.deathDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Tanggal Wafat"}),(0,t.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:l(e.deathDate)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,t.jsx)(u.A,{className:"w-3.5 h-3.5"})," Kontak"]}),o?(0,t.jsxs)(t.Fragment,{children:[e.phoneWhatsapp&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("a",{href:(0,z.rr)(e.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-green-600 font-medium hover:text-green-500",children:[(0,t.jsx)(u.A,{className:"w-3.5 h-3.5"}),e.phoneWhatsapp]})}),c.map(([e,s])=>{let a=F.find(s=>s.key===e);return(0,t.jsxs)("a",{href:R(e,s),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-md ${a?.bg||"bg-surface-100"} ${a?.color||"text-surface-500"} flex items-center justify-center`,children:(0,t.jsx)(H,{platform:e,className:"w-3 h-3"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:a?.label||e}),(0,t.jsx)("p",{className:"text-sm text-surface-900",children:s})]})]},e)})]}):(0,t.jsx)("p",{className:"text-sm text-surface-400",children:"Belum diisi"})]}),d&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,t.jsx)(N.A,{className:"w-3.5 h-3.5"})," Alamat"]}),e.address&&(0,t.jsx)("p",{className:"text-sm text-surface-900",children:e.address}),e.city&&(0,t.jsxs)("p",{className:"text-sm text-surface-600",children:["\uD83D\uDCCD ",e.city]})]}),h&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,t.jsx)(m.A,{className:"w-3.5 h-3.5"})," Orang Tua"]}),e.father&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-3.5 h-3.5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Ayah"}),(0,t.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:e.father.fullName})]})]}),e.mother&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-3.5 h-3.5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Ibu"}),(0,t.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:e.mother.fullName})]})]})]})]}),(0,t.jsxs)("div",{className:"px-5 pb-4 pt-2 flex gap-2 flex-shrink-0 border-t border-surface-100",children:[e.phoneWhatsapp&&(0,t.jsxs)("a",{href:(0,z.rr)(e.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-green-500 text-white text-sm font-medium hover:bg-green-400 transition-colors",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"WhatsApp"]}),(0,t.jsxs)("button",{onClick:()=>{a(),r(e.id)},className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary-200 text-primary-600 text-sm font-medium hover:bg-primary-50 transition-colors",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),"Edit"]})]})]})]})}function _({baniId:e,existingMembers:s,onClose:a,onSuccess:l}){let[n,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,b]=(0,r.useState)("MALE"),[g,j]=(0,r.useState)(""),[N,v]=(0,r.useState)(""),[y,w]=(0,r.useState)(!0),[k,A]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[E,L]=(0,r.useState)(""),[M,$]=(0,r.useState)(""),[P,T]=(0,r.useState)([]),[I,W]=(0,r.useState)(""),[D,z]=(0,r.useState)(""),[O,F]=(0,r.useState)(""),R=s.filter(e=>"MALE"===e.gender),H=s.filter(e=>"FEMALE"===e.gender),V=async s=>{s.preventDefault(),d(""),c(!0);try{let s={};P.forEach(e=>{e.value&&(s[e.key]=e.value)});let t=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({baniId:e,fullName:m,nickname:h||void 0,gender:p,birthDate:g||void 0,birthPlace:N||void 0,isAlive:y,deathDate:!y&&k?k:void 0,address:C||void 0,city:E||void 0,phoneWhatsapp:M||void 0,socialMedia:Object.keys(s).length>0?s:void 0,bio:I||void 0,fatherId:D||void 0,motherId:O||void 0})}),r=await t.json();if(!t.ok)return void d(r.error||"Gagal menyimpan");l(),a()}catch{d("Terjadi kesalahan. Silakan coba lagi.")}finally{c(!1)}},G="w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",K="block text-xs font-medium text-surface-600 mb-1";return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:a,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-surface-100 flex-shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:"Tambah Anggota"}),(0,t.jsx)("p",{className:"text-xs text-surface-400",children:"Tambahkan anggota baru ke pohon nasab"})]}),(0,t.jsx)("button",{onClick:a,className:"w-8 h-8 rounded-full bg-surface-100 flex items-center justify-center hover:bg-surface-200 transition-colors",children:(0,t.jsx)(i.A,{className:"w-4 h-4 text-surface-500"})})]}),(0,t.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4",children:[o&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-xs",children:o}),(0,t.jsxs)("form",{id:"add-member-form",onSubmit:V,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Data Dasar"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:K,children:["Nama Lengkap ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:G,placeholder:"Nama lengkap",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Nama Panggilan"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:G,placeholder:"Panggilan sehari-hari"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:K,children:["Jenis Kelamin ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>b("MALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"MALE"===p?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,t.jsx)("button",{type:"button",onClick:()=>b("FEMALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"FEMALE"===p?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Tanggal Lahir"}),(0,t.jsx)("input",{type:"date",value:g,onChange:e=>j(e.target.value),className:G})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Tempat Lahir"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>v(e.target.value),className:G,placeholder:"Kota"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Status"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{w(!0),A("")},className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${y?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500"}`,children:"❤️ Masih Hidup"}),(0,t.jsx)("button",{type:"button",onClick:()=>w(!1),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${!y?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!y&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Tanggal Wafat"}),(0,t.jsx)("input",{type:"date",value:k,onChange:e=>A(e.target.value),className:G})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Relasi Keluarga"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Ayah"}),(0,t.jsxs)("select",{value:D,onChange:e=>z(e.target.value),className:G,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),R.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Ibu"}),(0,t.jsxs)("select",{value:O,onChange:e=>F(e.target.value),className:G,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),H.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Kontak & Alamat"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"No. WhatsApp"}),(0,t.jsx)("input",{type:"tel",value:M,onChange:e=>$(e.target.value),className:G,placeholder:"08xxxxxxxxxx"})]}),(0,t.jsx)(B,{entries:P,onChange:T,inputClass:G,labelClass:K}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Alamat"}),(0,t.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),className:G,placeholder:"Alamat"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Kota"}),(0,t.jsx)("input",{type:"text",value:E,onChange:e=>L(e.target.value),className:G,placeholder:"Kota"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:K,children:"Bio / Catatan"}),(0,t.jsx)("textarea",{value:I,onChange:e=>W(e.target.value),rows:2,className:`${G} resize-none`,placeholder:"Catatan tentang anggota ini"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 px-5 py-4 border-t border-surface-100 flex-shrink-0",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,t.jsx)("button",{type:"submit",form:"add-member-form",disabled:n,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})}function q({memberId:e,baniId:s,allMembers:a,onClose:l,onSuccess:n}){let[c,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[v,w]=(0,r.useState)("MALE"),[k,A]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[E,L]=(0,r.useState)(!0),[M,$]=(0,r.useState)(""),[P,T]=(0,r.useState)(""),[I,W]=(0,r.useState)(""),[D,z]=(0,r.useState)(""),[O,F]=(0,r.useState)([]),[R,H]=(0,r.useState)(""),[V,G]=(0,r.useState)(""),[K,Z]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let s=await fetch(`/api/members/${e}`,{credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));p(e.error||`Error ${s.status}`),o(!1);return}let a=await s.json();g(a.fullName),N(a.nickname||""),w(a.gender),A(a.birthDate?a.birthDate.split("T")[0]:""),S(a.birthPlace||""),L(a.isAlive),$(a.deathDate?a.deathDate.split("T")[0]:""),T(a.address||""),W(a.city||""),z(a.phoneWhatsapp||"");let t=a.socialMedia;t&&F(Object.entries(t).filter(([,e])=>e).map(([e,s])=>({key:e,value:s}))),H(a.bio||""),G(a.fatherId||""),Z(a.motherId||"")}catch(e){console.error("Failed to fetch:",e),p("Gagal memuat data")}finally{o(!1)}})()},[e]);let J=async s=>{s.preventDefault(),p(""),m(!0);try{let s={};O.forEach(e=>{e.value&&(s[e.key]=e.value)});let a=await fetch(`/api/members/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:b,nickname:j||void 0,gender:v,birthDate:k||void 0,birthPlace:C||void 0,isAlive:E,deathDate:!E&&M?M:void 0,address:P||void 0,city:I||void 0,phoneWhatsapp:D||void 0,socialMedia:Object.keys(s).length>0?s:void 0,bio:R||void 0,fatherId:V||void 0,motherId:K||void 0})}),t=await a.json();if(!a.ok)return void p(t.error);n()}catch{p("Terjadi kesalahan. Silakan coba lagi.")}finally{m(!1)}},_=async()=>{if(confirm("Apakah Anda yakin ingin menghapus anggota ini? Tindakan ini tidak dapat dibatalkan.")){h(!0);try{let s=await fetch(`/api/members/${e}`,{method:"DELETE"});if(!s.ok){let e=await s.json();p(e.error);return}n()}catch{p("Gagal menghapus anggota")}finally{h(!1)}}},q=a.filter(s=>"MALE"===s.gender&&s.id!==e),U=a.filter(s=>"FEMALE"===s.gender&&s.id!==e),Q="w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",X="block text-xs font-medium text-surface-600 mb-1";return(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:l,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-surface-100 flex-shrink-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:"Edit Anggota"}),b&&(0,t.jsxs)("p",{className:"text-xs text-surface-400",children:["Ubah data ",b]})]}),(0,t.jsx)("button",{onClick:l,className:"w-8 h-8 rounded-full bg-surface-100 flex items-center justify-center hover:bg-surface-200 transition-colors",children:(0,t.jsx)(i.A,{className:"w-4 h-4 text-surface-500"})})]}),c?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(x.A,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4",children:[f&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-xs",children:f}),(0,t.jsxs)("form",{id:"edit-member-form",onSubmit:J,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Data Dasar"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:X,children:["Nama Lengkap ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>g(e.target.value),className:Q,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Nama Panggilan"}),(0,t.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),className:Q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Jenis Kelamin"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>w("MALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"MALE"===v?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,t.jsx)("button",{type:"button",onClick:()=>w("FEMALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"FEMALE"===v?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Tanggal Lahir"}),(0,t.jsx)("input",{type:"date",value:k,onChange:e=>A(e.target.value),className:Q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Tempat Lahir"}),(0,t.jsx)("input",{type:"text",value:C,onChange:e=>S(e.target.value),className:Q})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Status"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{L(!0),$("")},className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${E?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500"}`,children:"❤️ Masih Hidup"}),(0,t.jsx)("button",{type:"button",onClick:()=>L(!1),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${!E?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!E&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Tanggal Wafat"}),(0,t.jsx)("input",{type:"date",value:M,onChange:e=>$(e.target.value),className:Q})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Relasi Keluarga"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Ayah"}),(0,t.jsxs)("select",{value:V,onChange:e=>G(e.target.value),className:Q,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),q.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Ibu"}),(0,t.jsxs)("select",{value:K,onChange:e=>Z(e.target.value),className:Q,children:[(0,t.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),U.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.fullName," (Gen. ",e.generation+1,")"]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Kontak & Alamat"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"No. WhatsApp"}),(0,t.jsx)("input",{type:"tel",value:D,onChange:e=>z(e.target.value),className:Q,placeholder:"08xxxxxxxxxx"})]}),(0,t.jsx)(B,{entries:O,onChange:F,inputClass:Q,labelClass:X}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Alamat"}),(0,t.jsx)("input",{type:"text",value:P,onChange:e=>T(e.target.value),className:Q})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Kota"}),(0,t.jsx)("input",{type:"text",value:I,onChange:e=>W(e.target.value),className:Q})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:X,children:"Bio / Catatan"}),(0,t.jsx)("textarea",{value:R,onChange:e=>H(e.target.value),rows:2,className:`${Q} resize-none`})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 px-5 py-4 border-t border-surface-100 flex-shrink-0",children:[(0,t.jsx)("button",{type:"button",onClick:_,disabled:u,className:"px-3 py-2.5 rounded-xl border border-red-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center gap-1",children:u?(0,t.jsx)(x.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(y.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{type:"button",onClick:l,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,t.jsx)("button",{type:"submit",form:"edit-member-form",disabled:d,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})}function U({baniId:e,baniName:s,members:a,canEdit:l,initialOrientation:c="VERTICAL",initialIsPublic:o=!1,initialShowWa:d=!1,initialShowBirth:x=!1,initialShowAddress:h=!1,initialShowSocmed:f=!1}){let p,b,g,[j,y]=(0,r.useState)("tree"),[B,U]=(0,r.useState)([]),[Q,X]=(0,r.useState)(!0),[Y,ee]=(0,r.useState)(new Set),[es,ea]=(0,r.useState)(null),[et,er]=(0,r.useState)(1),el=(0,r.useRef)(null),ei=(0,r.useRef)(null),[en,ec]=(0,r.useState)(!1),[eo,ed]=(0,r.useState)(null),[ex,em]=(0,r.useState)(null),[eu,eh]=(0,r.useState)(null),[ef,ep]=(0,r.useState)(!1),[eb,eg]=(0,r.useState)(null),[ej,eN]=(0,r.useState)(!1),[ev,ey]=(0,r.useState)(c),[ew,ek]=(0,r.useState)(o),[eA,eC]=(0,r.useState)(!1),[eS,eE]=(0,r.useState)(!1),[eL,eM]=(0,r.useState)(d),[e$,eP]=(0,r.useState)(x),[eT,eI]=(0,r.useState)(h),[eW,eD]=(0,r.useState)(f),ez=(0,r.useCallback)(async()=>{try{let s=await fetch(`/api/members?baniId=${e}`),a=await s.json();U(a);let t=new Set;a.forEach(e=>{e.generation<=1&&t.add(e.id)}),ee(t)}catch(e){console.error("Failed to fetch:",e)}finally{X(!1)}},[e]);(0,r.useEffect)(()=>{ez()},[ez]);let eO=function(e,s){let a;if(0===e.length)return null;let t=new Map;return e.forEach(e=>t.set(e.id,e)),a||(a=e.find(e=>0===e.generation)),a||(a=e.reduce((e,s)=>e.generation<s.generation?e:s)),function s(a){let t=e.filter(e=>e.fatherId===a.id||e.motherId===a.id).filter((e,s,a)=>a.findIndex(s=>s.id===e.id)===s).sort((e,s)=>e.fullName.localeCompare(s.fullName));return{...a,children:t.map(e=>s(e))}}(a)}(B),eF=(0,r.useCallback)(e=>{ee(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},[]),eR=es?B.find(e=>e.id===es):null,eH=()=>er(e=>Math.min(e+.1,2)),eB=()=>er(e=>Math.max(e-.1,.3)),eV=()=>er(1),eG=(0,r.useCallback)(()=>{el.current&&(document.fullscreenElement?document.exitFullscreen():el.current.requestFullscreen().catch(e=>{console.error("Fullscreen error:",e)}))},[]);(0,r.useEffect)(()=>{let e=()=>{ec(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);let eK=(0,r.useRef)(et);eK.current=et;let eZ=(0,r.useRef)(new Map),eJ=(0,r.useRef)(0),e_=(0,r.useRef)(1),eq=(0,r.useCallback)(e=>{if(eZ.current.set(e.pointerId,{x:e.clientX,y:e.clientY}),e.target.setPointerCapture?.(e.pointerId),2===eZ.current.size){let e=Array.from(eZ.current.values()),s=e[0].x-e[1].x,a=e[0].y-e[1].y;eJ.current=Math.sqrt(s*s+a*a),e_.current=eK.current}},[]),eU=(0,r.useCallback)(e=>{if(eZ.current.has(e.pointerId)&&(eZ.current.set(e.pointerId,{x:e.clientX,y:e.clientY}),2===eZ.current.size&&eJ.current>0)){e.preventDefault();let s=Array.from(eZ.current.values()),a=s[0].x-s[1].x,t=s[0].y-s[1].y,r=Math.sqrt(a*a+t*t)/eJ.current;er(Math.round(100*Math.min(Math.max(e_.current*r,.2),3))/100)}},[]),eQ=(0,r.useCallback)(e=>{eZ.current.delete(e.pointerId),eZ.current.size<2&&(eJ.current=0)},[]),eX=(0,r.useCallback)((e,s)=>{ed({type:s,member:e})},[]),eY=(0,r.useCallback)(e=>{em(e)},[]),e0=(0,r.useCallback)(e=>{ex&&(eX(ex,e),em(null))},[ex,eX]),e1=(0,r.useCallback)(()=>{ed(null),ez()},[ez]),e2=(0,r.useCallback)(()=>{ez(),window.location.reload()},[ez]),e5=(0,r.useCallback)(async(s,a,t)=>{eC(!0);try{await fetch(`/api/banis/${e}/settings`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({treeOrientation:s,isPublic:a,...t})}),ey(s),ek(a),t?.showWaPublic!==void 0&&eM(t.showWaPublic),t?.showBirthPublic!==void 0&&eP(t.showBirthPublic),t?.showAddressPublic!==void 0&&eI(t.showAddressPublic),t?.showSocmedPublic!==void 0&&eD(t.showSocmedPublic)}catch(e){console.error("Save settings error:",e)}finally{eC(!1)}},[e]),e4=`${window.location.origin}/tree/${e}`,e3=(0,r.useCallback)(async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e4);else{let e=document.createElement("textarea");e.value=e4,e.style.position="fixed",e.style.left="-9999px",e.style.top="-9999px",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}eE(!0),setTimeout(()=>eE(!1),2e3)}catch{window.prompt("Salin link ini:",e4)}},[e4]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex rounded-xl bg-surface-100 p-1 flex-1",children:[(0,t.jsxs)("button",{onClick:()=>y("tree"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${"tree"===j?"bg-white text-primary-700 shadow-sm":"text-surface-500 hover:text-surface-700"}`,children:[(0,t.jsx)(w.A,{className:"w-4 h-4"}),"Pohon Nasab"]}),(0,t.jsxs)("button",{onClick:()=>y("list"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${"list"===j?"bg-white text-primary-700 shadow-sm":"text-surface-500 hover:text-surface-700"}`,children:[(0,t.jsx)(k.A,{className:"w-4 h-4"}),"Daftar (",a.length,")"]})]}),l&&(0,t.jsx)("button",{onClick:()=>eN(!0),className:"p-2.5 rounded-xl bg-white border border-surface-200 shadow-sm hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Pengaturan",children:(0,t.jsx)(A.A,{className:"w-4 h-4 text-surface-500"})}),"tree"===j&&(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-3 ml-auto",children:[(0,t.jsxs)("div",{className:"flex items-center bg-white rounded-xl border border-surface-200 shadow-sm overflow-hidden",children:[(0,t.jsx)("button",{onClick:eB,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Perkecil",children:(0,t.jsx)(C.A,{className:"w-4 h-4 text-surface-500"})}),(0,t.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,t.jsx)("button",{onClick:eV,className:"px-3 py-2 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Reset zoom",children:(0,t.jsxs)("span",{className:"text-xs font-semibold text-primary-600 min-w-[2.5rem] text-center block",children:[Math.round(100*et),"%"]})}),(0,t.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,t.jsx)("button",{onClick:eH,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Perbesar",children:(0,t.jsx)(S.A,{className:"w-4 h-4 text-surface-500"})}),(0,t.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,t.jsx)("button",{onClick:eG,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:en?"Keluar layar penuh":"Layar penuh",children:en?(0,t.jsx)(E.A,{className:"w-4 h-4 text-surface-500"}):(0,t.jsx)(L.A,{className:"w-4 h-4 text-surface-500"})})]}),(0,t.jsx)(O.A,{treeContainerRef:ei,baniName:s||"Pohon-Nasab"})]}),l&&"list"===j&&(0,t.jsxs)("button",{onClick:()=>ep(!0),className:"hidden sm:inline-flex ml-auto touch-target items-center gap-2 px-4 py-2 rounded-xl bg-primary-600 text-white font-medium text-sm hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20",children:[(0,t.jsx)(n.A,{className:"w-4 h-4"}),"Tambah"]})]}),l&&"list"===j&&(0,t.jsxs)("button",{onClick:()=>ep(!0),className:"sm:hidden inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-primary-600 text-white font-medium text-xs hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20",children:[(0,t.jsx)(n.A,{className:"w-3.5 h-3.5"}),"Tambah Anggota"]})]}),"tree"===j?(0,t.jsx)(t.Fragment,{children:Q?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[40vh] sm:min-h-[60vh]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-surface-500 text-sm",children:"Memuat pohon nasab..."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"sm:hidden",children:(0,t.jsx)(O.A,{treeContainerRef:ei,baniName:s||"Pohon-Nasab"})}),(0,t.jsxs)("div",{ref:el,className:"relative overflow-auto rounded-xl sm:rounded-2xl bg-white border border-surface-200 min-h-[40vh] sm:min-h-[60vh] p-3 sm:p-8",style:{touchAction:"pan-x pan-y"},onPointerDown:eq,onPointerMove:eU,onPointerUp:eQ,onPointerCancel:eQ,children:[(0,t.jsxs)("div",{className:"sm:hidden fixed bottom-20 right-3 z-30 flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:eH,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Perbesar",children:(0,t.jsx)(S.A,{className:"w-4 h-4 text-surface-600"})}),(0,t.jsx)("button",{onClick:eV,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Reset zoom",children:(0,t.jsxs)("span",{className:"text-[10px] font-bold text-primary-600",children:[Math.round(100*et),"%"]})}),(0,t.jsx)("button",{onClick:eB,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Perkecil",children:(0,t.jsx)(C.A,{className:"w-4 h-4 text-surface-600"})}),(0,t.jsx)("button",{onClick:eG,className:"w-10 h-10 rounded-full bg-primary-600 shadow-lg shadow-primary-600/30 flex items-center justify-center active:bg-primary-500 transition-colors",title:en?"Keluar layar penuh":"Layar penuh",children:en?(0,t.jsx)(E.A,{className:"w-4 h-4 text-white"}):(0,t.jsx)(L.A,{className:"w-4 h-4 text-white"})})]}),(0,t.jsx)("div",{ref:ei,className:"min-w-fit",children:(0,t.jsx)("div",{style:{transform:`scale(${et})`,transformOrigin:"top left"},className:"flex justify-center min-w-fit",children:eO?(0,t.jsx)(K,{node:eO,level:0,expanded:Y,toggleExpand:eF,selectedId:es,onSelect:ea,onShowQuickMenu:eY,canEdit:l,orientation:ev}):(0,t.jsx)("div",{className:"text-center py-20",children:(0,t.jsx)("p",{className:"text-surface-500",children:"Belum ada anggota di pohon ini"})})})})]}),eR&&(p=e=>{if(!e)return null;try{return new Date(e).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch{return e}},b=[],(eR.birthPlace||eR.birthDate)&&b.push([eR.birthPlace,p(eR.birthDate)].filter(Boolean).join(", ")),eR.city&&b.push(eR.city),eR.deathDate&&b.push("Wafat "+p(eR.deathDate)),(0,t.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 rounded-xl border border-surface-200 bg-white shadow-sm animate-scale-in",children:[(0,t.jsx)("div",{className:`w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 ${"MALE"===eR.gender?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:eR.photo?(0,t.jsx)("img",{src:eR.photo,alt:eR.fullName,className:"w-9 h-9 rounded-full object-cover"}):(0,t.jsx)(m.A,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,t.jsx)("span",{className:"font-semibold text-sm text-surface-900 truncate",children:eR.fullName}),eR.nickname&&(0,t.jsxs)("span",{className:"text-xs text-surface-400 truncate",children:["“",eR.nickname,"”"]}),!eR.isAlive&&(0,t.jsxs)("span",{className:"text-[10px] bg-surface-100 text-surface-400 px-1 py-0.5 rounded",children:["Alm","FEMALE"===eR.gender?"h":"","."]}),(0,t.jsxs)("span",{className:"text-[10px] text-surface-400 bg-surface-50 px-1.5 py-0.5 rounded",children:["Gen ",eR.generation]})]}),b.length>0&&(0,t.jsx)("p",{className:"text-[11px] text-surface-400 truncate mt-0.5",children:b.join(" \xb7 ")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[eR.phoneWhatsapp&&(0,t.jsx)("a",{href:(0,z.rr)(eR.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 rounded-lg bg-green-500 text-white flex items-center justify-center hover:bg-green-400 transition-colors",title:"WhatsApp",children:(0,t.jsx)(u.A,{className:"w-3 h-3"})}),(g=eR.socialMedia)?Object.entries(g).filter(([,e])=>e).map(([e])=>{let s=F.find(s=>s.key===e);return s?(0,t.jsx)("a",{href:R(e,g[e]),target:"_blank",rel:"noopener noreferrer",className:`w-7 h-7 rounded-lg ${s.bg} ${s.color} flex items-center justify-center hover:opacity-80 transition-opacity`,title:`${s.label}: ${g[e]}`,children:(0,t.jsx)(H,{platform:e,className:"w-3 h-3"})},e):null}):null,l&&(0,t.jsx)("button",{onClick:()=>eg(eR.id),className:"w-7 h-7 rounded-lg border border-surface-200 text-surface-500 flex items-center justify-center hover:bg-surface-50 transition-colors",title:"Edit",children:(0,t.jsx)(v.A,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:()=>ea(null),className:"w-7 h-7 rounded-lg border border-surface-200 text-surface-400 flex items-center justify-center hover:bg-surface-50 transition-colors",title:"Tutup",children:(0,t.jsx)(i.A,{className:"w-3 h-3"})})]})]}))]})}):(0,t.jsx)(Z,{members:a,baniId:e,onSelectMember:eh}),ex&&(0,t.jsx)(V,{node:ex,onSelect:e0,onClose:()=>em(null)}),eo&&(0,t.jsx)(G,{context:eo,allMembers:B,baniId:e,onClose:()=>ed(null),onSuccess:e1}),eu&&(0,t.jsx)(J,{member:eu,baniId:e,onClose:()=>eh(null),onEdit:e=>eg(e)}),eb&&(0,t.jsx)(q,{memberId:eb,baniId:e,allMembers:a,onClose:()=>eg(null),onSuccess:()=>{eg(null),ez(),window.location.reload()}}),ef&&(0,t.jsx)(_,{baniId:e,existingMembers:a,onClose:()=>ep(!1),onSuccess:e2}),ej&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>eN(!1)}),(0,t.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm animate-scale-in",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-surface-100 flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold text-surface-900 flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"w-5 h-5 text-primary-600"})," Pengaturan Tree"]}),(0,t.jsx)("button",{onClick:()=>eN(!1),className:"p-1.5 rounded-lg hover:bg-surface-100 transition-colors",children:(0,t.jsx)(i.A,{className:"w-5 h-5 text-surface-400"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block flex items-center gap-1.5",children:[(0,t.jsx)(M.A,{className:"w-3.5 h-3.5"})," Orientasi Pohon"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("button",{onClick:()=>e5("VERTICAL",ew),disabled:eA,className:`p-4 rounded-xl border-2 transition-all text-center ${"VERTICAL"===ev?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",children:[(0,t.jsx)("circle",{cx:"16",cy:"4",r:"3",className:"VERTICAL"===ev?"fill-primary-500":"fill-surface-300"}),(0,t.jsx)("line",{x1:"16",y1:"7",x2:"16",y2:"16",className:"VERTICAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"8",y1:"16",x2:"24",y2:"16",className:"VERTICAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"22",className:"VERTICAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"24",y1:"16",x2:"24",y2:"22",className:"VERTICAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"8",cy:"25",r:"3",className:"VERTICAL"===ev?"fill-primary-400":"fill-surface-300"}),(0,t.jsx)("circle",{cx:"24",cy:"25",r:"3",className:"VERTICAL"===ev?"fill-primary-400":"fill-surface-300"})]}),(0,t.jsx)("span",{className:`text-xs font-medium ${"VERTICAL"===ev?"text-primary-700":"text-surface-500"}`,children:"Vertikal"})]})}),(0,t.jsx)("button",{onClick:()=>e5("HORIZONTAL",ew),disabled:eA,className:`p-4 rounded-xl border-2 transition-all text-center ${"HORIZONTAL"===ev?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",children:[(0,t.jsx)("circle",{cx:"4",cy:"16",r:"3",className:"HORIZONTAL"===ev?"fill-primary-500":"fill-surface-300"}),(0,t.jsx)("line",{x1:"7",y1:"16",x2:"16",y2:"16",className:"HORIZONTAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"16",y1:"8",x2:"16",y2:"24",className:"HORIZONTAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"16",y1:"8",x2:"22",y2:"8",className:"HORIZONTAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"16",y1:"24",x2:"22",y2:"24",className:"HORIZONTAL"===ev?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"25",cy:"8",r:"3",className:"HORIZONTAL"===ev?"fill-primary-400":"fill-surface-300"}),(0,t.jsx)("circle",{cx:"25",cy:"24",r:"3",className:"HORIZONTAL"===ev?"fill-primary-400":"fill-surface-300"})]}),(0,t.jsx)("span",{className:`text-xs font-medium ${"HORIZONTAL"===ev?"text-primary-700":"text-surface-500"}`,children:"Horizontal"})]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block flex items-center gap-1.5",children:[ew?(0,t.jsx)($.A,{className:"w-3.5 h-3.5"}):(0,t.jsx)(P.A,{className:"w-3.5 h-3.5"})," Visibilitas"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>e5(ev,!1),disabled:eA,className:`w-full flex items-center gap-3 p-3 rounded-xl border-2 transition-all text-left ${!ew?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:[(0,t.jsx)(P.A,{className:`w-5 h-5 ${!ew?"text-primary-600":"text-surface-300"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:`text-sm font-medium ${!ew?"text-primary-700":"text-surface-600"}`,children:"Privat"}),(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Hanya anggota yang bisa melihat"})]})]}),(0,t.jsxs)("button",{onClick:()=>e5(ev,!0),disabled:eA,className:`w-full flex items-center gap-3 p-3 rounded-xl border-2 transition-all text-left ${ew?"border-green-500 bg-green-50":"border-surface-200 hover:border-surface-300"}`,children:[(0,t.jsx)($.A,{className:`w-5 h-5 ${ew?"text-green-600":"text-surface-300"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:`text-sm font-medium ${ew?"text-green-700":"text-surface-600"}`,children:"Publik"}),(0,t.jsx)("p",{className:"text-[11px] text-surface-400",children:"Siapapun dengan link bisa melihat pohon"})]})]})]}),ew&&(0,t.jsxs)("div",{className:"mt-3 p-3 rounded-lg bg-green-50 border border-green-200",children:[(0,t.jsx)("p",{className:"text-[11px] text-green-700 font-medium mb-2",children:"Link Publik:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:e4,className:"flex-1 px-2.5 py-1.5 rounded-lg bg-white border border-green-200 text-xs text-surface-700 truncate"}),(0,t.jsxs)("button",{onClick:e3,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-green-600 text-white text-xs font-medium hover:bg-green-500 transition-colors flex-shrink-0",children:[eS?(0,t.jsx)(T.A,{className:"w-3.5 h-3.5"}):(0,t.jsx)(I.A,{className:"w-3.5 h-3.5"}),eS?"Tersalin!":"Salin"]})]})]}),ew&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-surface-200",children:[(0,t.jsx)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block",children:"Data Ditampilkan di Publik"}),(0,t.jsx)("div",{className:"space-y-2",children:[{key:"showWaPublic",label:"Nomor WhatsApp",value:eL,iconComponent:(0,t.jsx)(W.A,{className:"w-4 h-4 text-green-500"}),iconBg:"bg-green-50"},{key:"showBirthPublic",label:"Tanggal Lahir",value:e$,iconComponent:(0,t.jsx)(D.A,{className:"w-4 h-4 text-blue-500"}),iconBg:"bg-blue-50"},{key:"showAddressPublic",label:"Alamat",value:eT,iconComponent:(0,t.jsx)(N.A,{className:"w-4 h-4 text-red-500"}),iconBg:"bg-red-50"},{key:"showSocmedPublic",label:"Sosial Media",value:eW,iconComponent:(0,t.jsx)($.A,{className:"w-4 h-4 text-purple-500"}),iconBg:"bg-purple-50"}].map(e=>(0,t.jsxs)("button",{onClick:()=>e5(ev,!0,{[e.key]:!e.value}),disabled:eA,className:"w-full flex items-center justify-between p-2.5 rounded-lg border border-surface-200 hover:bg-surface-50 transition-all",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2.5 text-sm text-surface-700",children:[(0,t.jsx)("span",{className:`w-7 h-7 rounded-lg ${e.iconBg} flex items-center justify-center flex-shrink-0`,children:e.iconComponent}),(0,t.jsx)("span",{className:"font-medium",children:e.label})]}),(0,t.jsx)("div",{className:`w-9 h-5 rounded-full transition-colors relative ${e.value?"bg-green-500":"bg-surface-300"}`,children:(0,t.jsx)("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${e.value?"translate-x-4":"translate-x-0.5"}`})})]},e.key))})]})]}),eA&&(0,t.jsx)("p",{className:"text-xs text-primary-500 text-center animate-pulse",children:"Menyimpan..."})]})]})]})]})}}}]);