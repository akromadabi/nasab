"use strict";exports.id=565,exports.ids=[565],exports.modules={14490:(a,b,c)=>{c.d(b,{rr:()=>d});function d(a){let b=a.replace(/\D/g,"");return b.startsWith("0")&&(b="62"+b.substring(1)),`https://wa.me/${b}`}},49966:(a,b,c)=>{c.d(b,{default:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\laragon\\\\www\\\\Nasab\\\\src\\\\app\\\\dashboard\\\\bani\\\\[id]\\\\BaniContent.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\laragon\\www\\Nasab\\src\\app\\dashboard\\bani\\[id]\\BaniContent.tsx","default")},67568:(a,b,c)=>{c.d(b,{A:()=>k});var d=c(48249),e=c(67484),f=c(40560),g=c(84248),h=c(33407),i=c(80600),j=c(46674);function k({treeContainerRef:a,baniName:b}){let[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(!1),[o,p]=(0,e.useState)(""),q=async()=>{let b=a.current;if(!b)throw Error("Tree element not found");let d=b.parentElement,e=b.querySelector("[style*='transform']"),f=e?.style.transform||"",g=d?.style.overflow||"",h=d?.style.maxHeight||"",i=d?.style.height||"";try{e&&(e.style.transform="scale(1)"),d&&(d.style.overflow="visible",d.style.maxHeight="none",d.style.height="auto"),await new Promise(a=>setTimeout(a,100));let{toPng:a}=await c.e(664).then(c.bind(c,8664));return await a(b,{backgroundColor:"#ffffff",pixelRatio:2,cacheBust:!0})}finally{e&&(e.style.transform=f),d&&(d.style.overflow=g,d.style.maxHeight=h,d.style.height=i)}},r=async()=>{l(!0),p("");try{let a=await q(),c=document.createElement("a");c.download=`${b.replace(/\s+/g,"-")}-tree.png`,c.href=a,c.click()}catch(a){console.error("Export image error:",a),p("Gagal mengekspor gambar")}finally{l(!1),n(!1)}},s=async()=>{l(!0),p("");try{let a=await q(),{jsPDF:d}=await c.e(847).then(c.bind(c,37847)),e=new Image;await new Promise((b,c)=>{e.onload=()=>b(),e.onerror=()=>c(Error("Failed to load image")),e.src=a});let f=e.naturalWidth,g=e.naturalHeight,h=new d({orientation:f>g?"landscape":"portrait",unit:"mm"}),i=h.internal.pageSize.getWidth(),j=h.internal.pageSize.getHeight();h.setFontSize(16),h.setFont("helvetica","bold"),h.text(b,i/2,15,{align:"center"}),h.setFontSize(10),h.setFont("helvetica","normal"),h.text("Silsilah Keluarga — Jejak Nasab",i/2,22,{align:"center"});let k=i-20,l=j-30-10,m=k,n=g/f*k;n>l&&(n=l,m=f/g*l);let o=(i-m)/2;h.addImage(a,"PNG",o,30,m,n),h.setFontSize(8),h.setTextColor(150);let p=new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});h.text(`Dicetak dari Jejak Nasab — ${p}`,i/2,j-5,{align:"center"}),h.save(`${b.replace(/\s+/g,"-")}-tree.pdf`)}catch(a){console.error("Export PDF error:",a),p("Gagal mengekspor PDF")}finally{l(!1),n(!1)}};return(0,d.jsxs)("div",{className:"relative sm:inline-block",children:[(0,d.jsxs)("button",{onClick:()=>{n(!m),p("")},disabled:k,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-primary-600 text-white font-medium text-xs hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20 disabled:opacity-50",children:[k?(0,d.jsx)(f.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,d.jsx)(g.A,{className:"w-3.5 h-3.5"}),"Ekspor"]}),m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),(0,d.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-52 rounded-xl bg-white border border-surface-200 shadow-xl z-50 overflow-hidden",children:[(0,d.jsxs)("button",{onClick:r,disabled:k,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-surface-700 hover:bg-surface-50 transition-colors disabled:opacity-50",children:[(0,d.jsx)(h.A,{className:"w-4 h-4 text-blue-500"}),"Simpan sebagai PNG"]}),(0,d.jsxs)("button",{onClick:s,disabled:k,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-surface-700 hover:bg-surface-50 transition-colors border-t border-surface-100 disabled:opacity-50",children:[(0,d.jsx)(i.A,{className:"w-4 h-4 text-red-500"}),"Simpan sebagai PDF"]})]})]}),o&&(0,d.jsxs)("div",{className:"absolute right-0 top-full mt-2 p-3 rounded-xl bg-red-50 border border-red-200 text-red-600 text-xs flex items-start gap-2 z-50 max-w-[200px]",children:[(0,d.jsx)(j.A,{className:"w-3 h-3 flex-shrink-0 mt-0.5 cursor-pointer",onClick:()=>p("")}),o]})]})}},94120:(a,b,c)=>{c.d(b,{default:()=>Y});var d=c(48249),e=c(67484),f=c(86588),g=c(46674),h=c(24520),i=c(19456),j=c(77650),k=c(68762),l=c(40560),m=c(98631),n=c(25378),o=c(72987),p=c(19794),q=c(72419),r=c(44218),s=c(10316),t=c(75154),u=c(60802),v=c(35389),w=c(59347),x=c(10559),y=c(69004),z=c(95581),A=c(77894),B=c(57351),C=c(45231),D=c(13481),E=c(93776),F=c(41023),G=c(82483),H=c(42742),I=c(15273),J=c(85231),K=c(38472),L=c(14490),M=c(67568);let N=[{key:"instagram",label:"Instagram",placeholder:"@username",color:"text-pink-600",bg:"bg-pink-50"},{key:"facebook",label:"Facebook",placeholder:"Nama atau URL",color:"text-blue-600",bg:"bg-blue-50"},{key:"tiktok",label:"TikTok",placeholder:"@username",color:"text-surface-900",bg:"bg-surface-100"},{key:"twitter",label:"Twitter / X",placeholder:"@username",color:"text-sky-500",bg:"bg-sky-50"},{key:"youtube",label:"YouTube",placeholder:"Channel URL",color:"text-red-600",bg:"bg-red-50"},{key:"linkedin",label:"LinkedIn",placeholder:"URL profil",color:"text-blue-700",bg:"bg-blue-50"}];function O(a,b){let c=b.trim();if(c.startsWith("http://")||c.startsWith("https://"))return c;let d=c.replace(/^@/,"");switch(a){case"instagram":return`https://instagram.com/${d}`;case"facebook":return`https://facebook.com/${d}`;case"tiktok":return`https://tiktok.com/@${d}`;case"twitter":return`https://x.com/${d}`;case"youtube":return`https://youtube.com/${d.startsWith("@")?d:"@"+d}`;case"linkedin":return`https://linkedin.com/in/${d}`;default:return"#"}}function P({platform:a,className:b="w-4 h-4"}){switch(a){case"instagram":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})});case"facebook":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})});case"tiktok":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})});case"twitter":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})});case"youtube":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})});case"linkedin":return(0,d.jsx)("svg",{className:b,viewBox:"0 0 24 24",fill:"currentColor",children:(0,d.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})});default:return(0,d.jsx)(f.A,{className:b})}}function Q({entries:a,onChange:b,inputClass:c,labelClass:f}){let[i,j]=(0,e.useState)(!1),k=a.map(a=>a.key),l=N.filter(a=>!k.includes(a.key));return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{className:f,children:"Sosial Media"}),a.map((e,f)=>{let h=N.find(a=>a.key===e.key);return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-lg ${h?.bg||"bg-surface-100"} ${h?.color||"text-surface-500"} flex items-center justify-center flex-shrink-0`,children:(0,d.jsx)(P,{platform:e.key,className:"w-4 h-4"})}),(0,d.jsx)("input",{type:"text",value:e.value,onChange:c=>{var d;let e;return d=c.target.value,void((e=[...a])[f]={...e[f],value:d},b(e))},className:`${c} flex-1`,placeholder:h?.placeholder||""}),(0,d.jsx)("button",{type:"button",onClick:()=>{b(a.filter((a,b)=>b!==f))},className:"w-8 h-8 rounded-lg border border-surface-200 text-surface-400 flex items-center justify-center hover:bg-red-50 hover:text-red-500 hover:border-red-200 transition-colors flex-shrink-0",children:(0,d.jsx)(g.A,{className:"w-3.5 h-3.5"})})]},e.key)}),l.length>0&&(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{type:"button",onClick:()=>j(!i),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-dashed border-surface-300 text-xs text-surface-500 font-medium hover:border-primary-400 hover:text-primary-600 transition-colors",children:[(0,d.jsx)(h.A,{className:"w-3.5 h-3.5"}),"Tambah Sosial Media"]}),i&&(0,d.jsx)("div",{className:"absolute left-0 top-full mt-1 w-56 bg-white rounded-xl border border-surface-200 shadow-xl z-20 p-1 animate-scale-in",children:l.map(c=>(0,d.jsxs)("button",{type:"button",onClick:()=>{b([...a,{key:c.key,value:""}]),j(!1)},className:"w-full flex items-center gap-2.5 px-3 py-2 rounded-lg hover:bg-surface-50 transition-colors text-left",children:[(0,d.jsx)("div",{className:`w-7 h-7 rounded-md ${c.bg} ${c.color} flex items-center justify-center`,children:(0,d.jsx)(P,{platform:c.key,className:"w-3.5 h-3.5"})}),(0,d.jsx)("span",{className:"text-sm text-surface-700 font-medium",children:c.label})]},c.key))})]})]})}function R({node:a,onSelect:b,onClose:c}){return(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:c,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,d.jsxs)("div",{className:"relative w-full max-w-xs bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:"px-4 pt-4 pb-3 border-b border-surface-100",children:[(0,d.jsx)("p",{className:"text-xs text-surface-400 font-medium",children:"Tambah keluarga untuk"}),(0,d.jsx)("p",{className:"text-sm font-semibold text-surface-900 truncate",children:a.fullName})]}),(0,d.jsxs)("div",{className:"p-2",children:[(0,d.jsxs)("button",{onClick:()=>b("child"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-primary-50 transition-colors",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-lg bg-primary-100 flex items-center justify-center",children:(0,d.jsx)(i.A,{className:"w-4.5 h-4.5 text-primary-600"})}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Anak"}),(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Anak kandung"})]})]}),(0,d.jsxs)("button",{onClick:()=>b("spouse"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-pink-50 transition-colors",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-lg bg-pink-100 flex items-center justify-center",children:(0,d.jsx)(j.A,{className:"w-4.5 h-4.5 text-pink-600"})}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Pasangan"}),(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Suami / Istri"})]})]}),(0,d.jsxs)("button",{onClick:()=>b("sibling"),className:"w-full flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-blue-50 transition-colors",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-lg bg-blue-100 flex items-center justify-center",children:(0,d.jsx)(k.A,{className:"w-4.5 h-4.5 text-blue-600"})}),(0,d.jsxs)("div",{className:"text-left",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-surface-800",children:"Tambah Saudara"}),(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Saudara kandung"})]})]})]}),(0,d.jsx)("div",{className:"px-2 pb-2",children:(0,d.jsx)("button",{onClick:c,className:"w-full py-2.5 rounded-xl text-sm font-medium text-surface-400 hover:bg-surface-50 transition-colors",children:"Batal"})})]})]})}function S({context:a,allMembers:b,baniId:c,onClose:f,onSuccess:i}){let[j,k]=(0,e.useState)(""),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)("MALE"),[q,r]=(0,e.useState)(!0),[s,t]=(0,e.useState)(!1),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(""),{type:y,member:z}=a,A=[];"MALE"===z.gender&&z.marriagesAsHusband?z.marriagesAsHusband.forEach(a=>A.push(a.wife)):"FEMALE"===z.gender&&z.marriagesAsWife&&z.marriagesAsWife.forEach(a=>A.push(a.husband));let B=1===A.length,C=A.length>1,D="child"===y?`Tambah Anak ${z.fullName}`:"spouse"===y?`Tambah Pasangan ${z.fullName}`:`Tambah Saudara ${z.fullName}`,E="child"===y?A.length>0?A.map(a=>({id:a.id,fullName:a.fullName,gender:a.gender,generation:0})):"MALE"===z.gender?b.filter(a=>"FEMALE"===a.gender):b.filter(a=>"MALE"===a.gender):[],F=async a=>{if(a.preventDefault(),j.trim()){t(!0),v("");try{let a,b;"child"===y?"MALE"===z.gender?(a=z.id,b=w||void 0):(b=z.id,a=w||void 0):"sibling"===y&&(a=z.fatherId||void 0,b=z.motherId||void 0);let d=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({baniId:c,fullName:j.trim(),nickname:m.trim()||void 0,gender:o,isAlive:q,fatherId:a,motherId:b})}),e=await d.json();if(!d.ok)return void v(e.error||"Gagal menyimpan");if("spouse"===y){let a="MALE"===z.gender?z.id:e.id,b="FEMALE"===z.gender?z.id:e.id;(await fetch("/api/marriages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({husbandId:a,wifeId:b})})).ok||console.error("Failed to create marriage, but member was created")}i()}catch{v("Terjadi kesalahan. Silakan coba lagi.")}finally{t(!1)}}};return(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:f}),(0,d.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-scale-in",children:[(0,d.jsxs)("div",{className:"sticky top-0 bg-white rounded-t-2xl border-b border-surface-100 p-5 flex items-start justify-between z-10",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:D}),(0,d.jsx)("p",{className:"text-xs text-surface-400 mt-0.5",children:"child"===y?"Anggota baru akan menjadi anak dari orang ini":"spouse"===y?"Anggota baru akan menjadi pasangan orang ini":"Anggota baru akan memiliki orang tua yang sama"})]}),(0,d.jsx)("button",{onClick:f,className:"p-1.5 rounded-lg hover:bg-surface-100 transition-colors text-surface-400",children:(0,d.jsx)(g.A,{className:"w-5 h-5"})})]}),(0,d.jsxs)("form",{onSubmit:F,className:"p-5 space-y-4",children:[u&&(0,d.jsx)("div",{className:"p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-sm",children:u}),"child"===y&&(0,d.jsx)("div",{className:"p-3 rounded-xl bg-primary-50 border border-primary-100",children:(0,d.jsxs)("p",{className:"text-xs font-medium text-primary-700",children:["MALE"===z.gender?"\uD83D\uDC68 Ayah":"\uD83D\uDC69 Ibu",":"," ",(0,d.jsx)("span",{className:"font-bold",children:z.fullName})]})}),"sibling"===y&&(z.fatherId||z.motherId)&&(0,d.jsxs)("div",{className:"p-3 rounded-xl bg-blue-50 border border-blue-100 space-y-1",children:[(0,d.jsxs)("p",{className:"text-xs text-blue-600",children:["Orang tua yang sama dengan ",z.fullName,":"]}),z.fatherId&&(0,d.jsxs)("p",{className:"text-xs font-medium text-blue-700",children:["\uD83D\uDC68 Ayah: ",b.find(a=>a.id===z.fatherId)?.fullName||"—"]}),z.motherId&&(0,d.jsxs)("p",{className:"text-xs font-medium text-blue-700",children:["\uD83D\uDC69 Ibu: ",b.find(a=>a.id===z.motherId)?.fullName||"—"]})]}),"spouse"===y&&(0,d.jsx)("div",{className:"p-3 rounded-xl bg-pink-50 border border-pink-100",children:(0,d.jsxs)("p",{className:"text-xs font-medium text-pink-700",children:["\uD83D\uDC91 Pasangan dari ",(0,d.jsx)("span",{className:"font-bold",children:z.fullName})]})}),"child"===y&&B&&(0,d.jsx)("div",{className:"p-3 rounded-xl bg-primary-50 border border-primary-100",children:(0,d.jsxs)("p",{className:"text-xs font-medium text-primary-700",children:["MALE"===z.gender?"\uD83D\uDC69 Ibu":"\uD83D\uDC68 Ayah",":"," ",(0,d.jsx)("span",{className:"font-bold",children:A[0].fullName})]})}),"child"===y&&C&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"MALE"===z.gender?"Ibu":"Ayah"}),(0,d.jsxs)("select",{value:w,onChange:a=>x(a.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 focus:outline-none focus:border-primary-500 bg-white",children:[(0,d.jsxs)("option",{value:"",children:["— Pilih ","MALE"===z.gender?"Ibu":"Ayah"," —"]}),E.map(a=>(0,d.jsx)("option",{value:a.id,children:a.fullName},a.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:["Nama Lengkap ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 bg-white",placeholder:"Nama lengkap",autoFocus:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"Nama Panggilan"}),(0,d.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),className:"w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 bg-white",placeholder:"Panggilan sehari-hari"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:["Jenis Kelamin ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>p("MALE"),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${"MALE"===o?"bg-blue-50 text-blue-700 border-2 border-blue-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,d.jsx)("button",{type:"button",onClick:()=>p("FEMALE"),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${"FEMALE"===o?"bg-pink-50 text-pink-700 border-2 border-pink-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-1.5",children:"Status"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>r(!0),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${q?"bg-green-50 text-green-700 border-2 border-green-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"❤️ Hidup"}),(0,d.jsx)("button",{type:"button",onClick:()=>r(!1),className:`py-2.5 rounded-xl text-sm font-medium transition-all ${!q?"bg-surface-100 text-surface-700 border-2 border-surface-300":"bg-white text-surface-500 border border-surface-200 hover:bg-surface-50"}`,children:"\uD83D\uDD4A️ Wafat"})]})]}),(0,d.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,d.jsx)("button",{type:"button",onClick:f,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,d.jsx)("button",{type:"submit",disabled:s||!j.trim(),className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.A,{className:"w-4 h-4"}),"Simpan"]})})]})]})]})]})}function T({node:a,level:b,expanded:c,toggleExpand:e,selectedId:f,onSelect:g,onShowQuickMenu:i,canEdit:j=!0,orientation:k}){let l,s=c.has(a.id),t=a.children.length>0,u=f===a.id,v="HORIZONTAL"===k,w=(0,d.jsxs)("div",{onClick:()=>g(a.id),className:`tree-node relative cursor-pointer rounded-xl sm:rounded-2xl border-2 p-2 sm:p-3 w-28 sm:w-44 text-center transition-all group ${u?"border-primary-500 bg-primary-50 shadow-lg shadow-primary-500/20":a.isAlive?"MALE"===a.gender?"border-blue-200 bg-white hover:border-blue-400":"border-pink-200 bg-white hover:border-pink-400":"border-surface-200 bg-surface-50 opacity-80 hover:opacity-100"}`,children:[(0,d.jsx)("div",{className:`w-9 h-9 sm:w-12 sm:h-12 rounded-full mx-auto mb-1 sm:mb-2 flex items-center justify-center ${"MALE"===a.gender?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:a.photo?(0,d.jsx)("img",{src:a.photo,alt:a.fullName,className:"w-9 h-9 sm:w-12 sm:h-12 rounded-full object-cover"}):(0,d.jsx)(m.A,{className:"w-4 h-4 sm:w-6 sm:h-6"})}),(0,d.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-surface-900 truncate",children:a.fullName}),a.nickname&&(0,d.jsxs)("p",{className:"text-[10px] text-surface-400 truncate",children:["(",a.nickname,")"]}),!a.isAlive&&(0,d.jsx)("span",{className:"inline-block text-[10px] px-1.5 py-0.5 rounded bg-surface-200 text-surface-500 mt-1",children:"Alm."}),(l=[],("MALE"===a.gender&&a.marriagesAsHusband?a.marriagesAsHusband.forEach(a=>l.push(a.wife.fullName)):"FEMALE"===a.gender&&a.marriagesAsWife&&a.marriagesAsWife.forEach(a=>l.push(a.husband.fullName)),0===l.length)?null:(0,d.jsx)("div",{className:"mt-1.5 space-y-0.5",children:l.map((b,c)=>(0,d.jsxs)("p",{className:`text-[9px] sm:text-[10px] truncate px-1.5 py-0.5 rounded-full ${"MALE"===a.gender?"bg-pink-50 text-pink-500":"bg-blue-50 text-blue-500"}`,children:["\uD83D\uDC91 ",b]},c))})),u&&j&&a.phoneWhatsapp&&(0,d.jsx)("a",{href:(0,L.rr)(a.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-green-500 text-white flex items-center justify-center shadow-md hover:bg-green-400 transition-all animate-scale-in z-10",children:(0,d.jsx)(n.A,{className:"w-3 h-3"})}),u&&j&&(0,d.jsx)("button",{onClick:b=>{b.stopPropagation(),i(a)},className:"absolute -top-2 -left-2 z-30 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center shadow-md hover:bg-emerald-400 transition-all hover:scale-110 animate-scale-in",title:"Tambah keluarga",children:(0,d.jsx)(h.A,{className:"w-3 h-3"})}),t&&(0,d.jsx)("button",{onClick:b=>{b.stopPropagation(),e(a.id)},className:v?"absolute top-1/2 -right-3 -translate-y-1/2 w-6 h-6 rounded-full bg-primary-500 text-white flex items-center justify-center shadow-md hover:bg-primary-400 transition-colors text-xs":"absolute -bottom-3 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full bg-primary-500 text-white flex items-center justify-center shadow-md hover:bg-primary-400 transition-colors text-xs",children:v?s?(0,d.jsx)(o.A,{className:"w-3.5 h-3.5"}):(0,d.jsx)(p.A,{className:"w-3.5 h-3.5"}):s?(0,d.jsx)(q.A,{className:"w-3.5 h-3.5"}):(0,d.jsx)(r.A,{className:"w-3.5 h-3.5"})})]});return v?(0,d.jsxs)("div",{className:"flex flex-row items-center",children:[w,t&&s&&(0,d.jsxs)("div",{className:"flex flex-row items-center",children:[(0,d.jsx)("div",{className:"h-0.5 w-8 bg-gradient-to-r from-primary-300 to-primary-200"}),(0,d.jsx)("div",{className:"flex flex-col",children:a.children.map((h,l)=>(0,d.jsxs)("div",{className:"flex flex-row items-center relative",children:[a.children.length>1&&(0,d.jsxs)("div",{className:"flex flex-col w-0.5 self-stretch",children:[(0,d.jsx)("div",{className:`flex-1 w-full ${0===l?"bg-transparent":"bg-primary-200"}`}),(0,d.jsx)("div",{className:`flex-1 w-full ${l===a.children.length-1?"bg-transparent":"bg-primary-200"}`})]}),(0,d.jsx)("div",{className:"h-0.5 w-6 bg-primary-200"}),(0,d.jsx)("div",{className:"py-2 sm:py-3",children:(0,d.jsx)(T,{node:h,level:b+1,expanded:c,toggleExpand:e,selectedId:f,onSelect:g,onShowQuickMenu:i,canEdit:j,orientation:k})})]},h.id))})]})]}):(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[w,t&&s&&(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-0.5 h-8 bg-gradient-to-b from-primary-300 to-primary-200"}),(0,d.jsx)("div",{className:"flex",children:a.children.map((h,l)=>(0,d.jsxs)("div",{className:"flex flex-col items-center relative",children:[a.children.length>1&&(0,d.jsxs)("div",{className:"flex w-full h-0.5",children:[(0,d.jsx)("div",{className:`flex-1 h-full ${0===l?"bg-transparent":"bg-primary-200"}`}),(0,d.jsx)("div",{className:`flex-1 h-full ${l===a.children.length-1?"bg-transparent":"bg-primary-200"}`})]}),(0,d.jsx)("div",{className:"w-0.5 h-6 bg-primary-200"}),(0,d.jsx)("div",{className:"px-2 sm:px-3",children:(0,d.jsx)(T,{node:h,level:b+1,expanded:c,toggleExpand:e,selectedId:f,onSelect:g,onShowQuickMenu:i,canEdit:j,orientation:k})})]},h.id))})]})]})}function U({members:a,baniId:b,onSelectMember:c}){let[f,g]=(0,e.useState)(""),[h,i]=(0,e.useState)(null),j=Array.from({length:Math.max(...a.map(a=>a.generation),0)+1},(a,b)=>b),k=a.filter(a=>{let b=a.fullName.toLowerCase().includes(f.toLowerCase())||a.nickname?.toLowerCase().includes(f.toLowerCase())||a.city?.toLowerCase().includes(f.toLowerCase()),c=null===h||a.generation===h;return b&&c}),l=k.reduce((a,b)=>(a[b.generation]||(a[b.generation]=[]),a[b.generation].push(b),a),{});return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(s.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-surface-400"}),(0,d.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),className:"w-full pl-9 pr-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",placeholder:"Cari nama..."})]}),(0,d.jsxs)("select",{value:null===h?"":h,onChange:a=>i(""===a.target.value?null:parseInt(a.target.value)),className:"px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-700 focus:outline-none focus:border-primary-500 bg-white min-w-[100px]",children:[(0,d.jsx)("option",{value:"",children:"Semua"}),j.map(a=>(0,d.jsxs)("option",{value:a,children:["Gen ",a+1]},a))]})]}),Object.keys(l).sort((a,b)=>Number(a)-Number(b)).map(a=>(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider mb-2",children:["Generasi ",Number(a)+1]}),(0,d.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l[Number(a)].map(a=>(0,d.jsxs)("button",{onClick:()=>c(a),className:"group p-3 rounded-xl bg-white border border-surface-200 hover:border-primary-200 hover:shadow-md transition-all flex items-center gap-3 text-left w-full",children:[(0,d.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${"MALE"===a.gender?"bg-blue-50 text-blue-600":"bg-pink-50 text-pink-600"} ${!a.isAlive?"opacity-60":""}`,children:a.photo?(0,d.jsx)("img",{src:a.photo,alt:a.fullName,className:"w-10 h-10 rounded-full object-cover"}):(0,d.jsx)(m.A,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-surface-900 truncate",children:a.fullName}),!a.isAlive&&(0,d.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded bg-surface-100 text-surface-400 flex-shrink-0",children:"Alm."})]}),a.nickname&&(0,d.jsx)("p",{className:"text-xs text-surface-400 truncate",children:a.nickname}),a.city&&(0,d.jsxs)("p",{className:"text-[11px] text-surface-400 mt-0.5",children:["\uD83D\uDCCD ",a.city]})]}),(0,d.jsx)(p.A,{className:"w-4 h-4 text-surface-300 group-hover:text-primary-500 transition-colors flex-shrink-0"})]},a.id))})]},a)),0===k.length&&(0,d.jsxs)("div",{className:"text-center py-12 rounded-xl bg-white border border-surface-200",children:[(0,d.jsx)(m.A,{className:"w-10 h-10 text-surface-300 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-surface-500 text-sm",children:"Tidak ada anggota ditemukan"})]})]})}function V({member:a,baniId:b,onClose:c,onEdit:e}){let f=a=>{if(!a)return null;try{return new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch{return a}},h=a.socialMedia,i=h?Object.entries(h).filter(([,a])=>a):[],j=a.phoneWhatsapp||i.length>0,k=a.address||a.city,l=a.birthDate||a.deathDate,o=a.father||a.mother;return(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:c,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,d.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:`relative px-5 pt-5 pb-4 flex-shrink-0 ${"MALE"===a.gender?"bg-gradient-to-br from-blue-50 to-blue-100/50":"bg-gradient-to-br from-pink-50 to-pink-100/50"}`,children:[(0,d.jsx)("button",{onClick:c,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-white/80 flex items-center justify-center hover:bg-white transition-colors",children:(0,d.jsx)(g.A,{className:"w-4 h-4 text-surface-500"})}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-xl font-bold ${"MALE"===a.gender?"bg-blue-200/60 text-blue-600":"bg-pink-200/60 text-pink-600"} ${!a.isAlive?"opacity-60":""}`,children:a.photo?(0,d.jsx)("img",{src:a.photo,alt:a.fullName,className:"w-16 h-16 rounded-2xl object-cover"}):(0,d.jsx)(m.A,{className:"w-8 h-8"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,d.jsx)("h3",{className:"text-lg font-bold text-surface-900",children:a.fullName}),!a.isAlive&&(0,d.jsx)("span",{className:"px-1.5 py-0.5 rounded-lg bg-surface-200/80 text-surface-500 text-[10px] font-medium",children:"\uD83D\uDD4A️ Almarhum/ah"})]}),a.nickname&&(0,d.jsxs)("p",{className:"text-sm text-surface-500",children:['"',a.nickname,'"']}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-1.5",children:[(0,d.jsx)("span",{className:`text-[11px] px-2 py-0.5 rounded-full font-medium ${"MALE"===a.gender?"bg-blue-200/60 text-blue-700":"bg-pink-200/60 text-pink-700"}`,children:"MALE"===a.gender?"\uD83D\uDC68 Laki-laki":"\uD83D\uDC69 Perempuan"}),(0,d.jsxs)("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-primary-100/60 text-primary-700 font-medium",children:["Generasi ",a.generation+1]})]})]})]}),a.bio&&(0,d.jsx)("p",{className:"mt-3 text-sm text-surface-600 leading-relaxed",children:a.bio})]}),(0,d.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4 space-y-4",children:[l&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,d.jsx)(t.A,{className:"w-3.5 h-3.5"})," Tanggal"]}),a.birthDate&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Tanggal Lahir"}),(0,d.jsxs)("p",{className:"text-sm text-surface-900 font-medium",children:[f(a.birthDate),a.birthPlace?` — ${a.birthPlace}`:""]})]}),a.deathDate&&(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Tanggal Wafat"}),(0,d.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:f(a.deathDate)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,d.jsx)(n.A,{className:"w-3.5 h-3.5"})," Kontak"]}),j?(0,d.jsxs)(d.Fragment,{children:[a.phoneWhatsapp&&(0,d.jsx)("div",{className:"flex items-center gap-2",children:(0,d.jsxs)("a",{href:(0,L.rr)(a.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-green-600 font-medium hover:text-green-500",children:[(0,d.jsx)(n.A,{className:"w-3.5 h-3.5"}),a.phoneWhatsapp]})}),i.map(([a,b])=>{let c=N.find(b=>b.key===a);return(0,d.jsxs)("a",{href:O(a,b),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[(0,d.jsx)("div",{className:`w-6 h-6 rounded-md ${c?.bg||"bg-surface-100"} ${c?.color||"text-surface-500"} flex items-center justify-center`,children:(0,d.jsx)(P,{platform:a,className:"w-3 h-3"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:c?.label||a}),(0,d.jsx)("p",{className:"text-sm text-surface-900",children:b})]})]},a)})]}):(0,d.jsx)("p",{className:"text-sm text-surface-400",children:"Belum diisi"})]}),k&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,d.jsx)(u.A,{className:"w-3.5 h-3.5"})," Alamat"]}),a.address&&(0,d.jsx)("p",{className:"text-sm text-surface-900",children:a.address}),a.city&&(0,d.jsxs)("p",{className:"text-sm text-surface-600",children:["\uD83D\uDCCD ",a.city]})]}),o&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h4",{className:"text-[11px] font-semibold text-surface-400 uppercase tracking-wider flex items-center gap-1.5",children:[(0,d.jsx)(m.A,{className:"w-3.5 h-3.5"})," Orang Tua"]}),a.father&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-7 h-7 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:(0,d.jsx)(m.A,{className:"w-3.5 h-3.5"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Ayah"}),(0,d.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:a.father.fullName})]})]}),a.mother&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-7 h-7 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center",children:(0,d.jsx)(m.A,{className:"w-3.5 h-3.5"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Ibu"}),(0,d.jsx)("p",{className:"text-sm text-surface-900 font-medium",children:a.mother.fullName})]})]})]})]}),(0,d.jsxs)("div",{className:"px-5 pb-4 pt-2 flex gap-2 flex-shrink-0 border-t border-surface-100",children:[a.phoneWhatsapp&&(0,d.jsxs)("a",{href:(0,L.rr)(a.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-green-500 text-white text-sm font-medium hover:bg-green-400 transition-colors",children:[(0,d.jsx)(n.A,{className:"w-4 h-4"}),"WhatsApp"]}),(0,d.jsxs)("button",{onClick:()=>{c(),e(a.id)},className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl border border-primary-200 text-primary-600 text-sm font-medium hover:bg-primary-50 transition-colors",children:[(0,d.jsx)(v.A,{className:"w-4 h-4"}),"Edit"]})]})]})]})}function W({baniId:a,existingMembers:b,onClose:c,onSuccess:f}){let[h,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(""),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)(""),[q,r]=(0,e.useState)("MALE"),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(!0),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(""),[E,F]=(0,e.useState)(""),[G,H]=(0,e.useState)([]),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(""),[M,N]=(0,e.useState)(""),O=b.filter(a=>"MALE"===a.gender),P=b.filter(a=>"FEMALE"===a.gender),R=async b=>{b.preventDefault(),k(""),i(!0);try{let b={};G.forEach(a=>{a.value&&(b[a.key]=a.value)});let d=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({baniId:a,fullName:m,nickname:o||void 0,gender:q,birthDate:s||void 0,birthPlace:u||void 0,isAlive:w,deathDate:!w&&y?y:void 0,address:A||void 0,city:C||void 0,phoneWhatsapp:E||void 0,socialMedia:Object.keys(b).length>0?b:void 0,bio:I||void 0,fatherId:K||void 0,motherId:M||void 0})}),e=await d.json();if(!d.ok)return void k(e.error||"Gagal menyimpan");f(),c()}catch{k("Terjadi kesalahan. Silakan coba lagi.")}finally{i(!1)}},S="w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",T="block text-xs font-medium text-surface-600 mb-1";return(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:c,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,d.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-surface-100 flex-shrink-0",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:"Tambah Anggota"}),(0,d.jsx)("p",{className:"text-xs text-surface-400",children:"Tambahkan anggota baru ke pohon nasab"})]}),(0,d.jsx)("button",{onClick:c,className:"w-8 h-8 rounded-full bg-surface-100 flex items-center justify-center hover:bg-surface-200 transition-colors",children:(0,d.jsx)(g.A,{className:"w-4 h-4 text-surface-500"})})]}),(0,d.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4",children:[j&&(0,d.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-xs",children:j}),(0,d.jsxs)("form",{id:"add-member-form",onSubmit:R,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Data Dasar"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:T,children:["Nama Lengkap ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),className:S,placeholder:"Nama lengkap",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Nama Panggilan"}),(0,d.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),className:S,placeholder:"Panggilan sehari-hari"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:T,children:["Jenis Kelamin ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>r("MALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"MALE"===q?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,d.jsx)("button",{type:"button",onClick:()=>r("FEMALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"FEMALE"===q?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Tanggal Lahir"}),(0,d.jsx)("input",{type:"date",value:s,onChange:a=>t(a.target.value),className:S})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Tempat Lahir"}),(0,d.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),className:S,placeholder:"Kota"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Status"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{x(!0),z("")},className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${w?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500"}`,children:"❤️ Masih Hidup"}),(0,d.jsx)("button",{type:"button",onClick:()=>x(!1),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${!w?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!w&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Tanggal Wafat"}),(0,d.jsx)("input",{type:"date",value:y,onChange:a=>z(a.target.value),className:S})]})]}),(0,d.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Relasi Keluarga"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Ayah"}),(0,d.jsxs)("select",{value:K,onChange:a=>L(a.target.value),className:S,children:[(0,d.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),O.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.fullName," (Gen. ",a.generation+1,")"]},a.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Ibu"}),(0,d.jsxs)("select",{value:M,onChange:a=>N(a.target.value),className:S,children:[(0,d.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),P.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.fullName," (Gen. ",a.generation+1,")"]},a.id))]})]})]}),(0,d.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Kontak & Alamat"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"No. WhatsApp"}),(0,d.jsx)("input",{type:"tel",value:E,onChange:a=>F(a.target.value),className:S,placeholder:"08xxxxxxxxxx"})]}),(0,d.jsx)(Q,{entries:G,onChange:H,inputClass:S,labelClass:T}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Alamat"}),(0,d.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),className:S,placeholder:"Alamat"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Kota"}),(0,d.jsx)("input",{type:"text",value:C,onChange:a=>D(a.target.value),className:S,placeholder:"Kota"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:T,children:"Bio / Catatan"}),(0,d.jsx)("textarea",{value:I,onChange:a=>J(a.target.value),rows:2,className:`${S} resize-none`,placeholder:"Catatan tentang anggota ini"})]})]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 px-5 py-4 border-t border-surface-100 flex-shrink-0",children:[(0,d.jsx)("button",{type:"button",onClick:c,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,d.jsx)("button",{type:"submit",form:"add-member-form",disabled:h,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:h?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})}function X({memberId:a,baniId:b,allMembers:c,onClose:f,onSuccess:h}){let[i,j]=(0,e.useState)(!0),[k,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(""),[t,u]=(0,e.useState)(""),[v,x]=(0,e.useState)("MALE"),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(!0),[E,F]=(0,e.useState)(""),[G,H]=(0,e.useState)(""),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(""),[M,N]=(0,e.useState)([]),[O,P]=(0,e.useState)(""),[R,S]=(0,e.useState)(""),[T,U]=(0,e.useState)(""),V=async b=>{b.preventDefault(),q(""),m(!0);try{let b={};M.forEach(a=>{a.value&&(b[a.key]=a.value)});let c=await fetch(`/api/members/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:r,nickname:t||void 0,gender:v,birthDate:y||void 0,birthPlace:A||void 0,isAlive:C,deathDate:!C&&E?E:void 0,address:G||void 0,city:I||void 0,phoneWhatsapp:K||void 0,socialMedia:Object.keys(b).length>0?b:void 0,bio:O||void 0,fatherId:R||void 0,motherId:T||void 0})}),d=await c.json();if(!c.ok)return void q(d.error);h()}catch{q("Terjadi kesalahan. Silakan coba lagi.")}finally{m(!1)}},W=async()=>{if(confirm("Apakah Anda yakin ingin menghapus anggota ini? Tindakan ini tidak dapat dibatalkan.")){o(!0);try{let b=await fetch(`/api/members/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json();q(a.error);return}h()}catch{q("Gagal menghapus anggota")}finally{o(!1)}}},X=c.filter(b=>"MALE"===b.gender&&b.id!==a),Y=c.filter(b=>"FEMALE"===b.gender&&b.id!==a),Z="w-full px-3 py-2.5 rounded-xl border border-surface-200 text-sm text-surface-900 placeholder-surface-400 focus:outline-none focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all",$="block text-xs font-medium text-surface-600 mb-1";return(0,d.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center p-4 pt-8 sm:items-center sm:pt-4",onClick:f,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),(0,d.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl animate-scale-in overflow-hidden max-h-[90vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-surface-100 flex-shrink-0",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-surface-900",children:"Edit Anggota"}),r&&(0,d.jsxs)("p",{className:"text-xs text-surface-400",children:["Ubah data ",r]})]}),(0,d.jsx)("button",{onClick:f,className:"w-8 h-8 rounded-full bg-surface-100 flex items-center justify-center hover:bg-surface-200 transition-colors",children:(0,d.jsx)(g.A,{className:"w-4 h-4 text-surface-500"})})]}),i?(0,d.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,d.jsx)(l.A,{className:"w-8 h-8 animate-spin text-primary-500"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"overflow-y-auto flex-1 px-5 py-4",children:[p&&(0,d.jsx)("div",{className:"mb-4 p-3 rounded-xl bg-red-50 border border-red-200 text-red-700 text-xs",children:p}),(0,d.jsxs)("form",{id:"edit-member-form",onSubmit:V,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Data Dasar"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:$,children:["Nama Lengkap ",(0,d.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),className:Z,required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Nama Panggilan"}),(0,d.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),className:Z})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Jenis Kelamin"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>x("MALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"MALE"===v?"border-blue-500 bg-blue-50 text-blue-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC68 Laki-laki"}),(0,d.jsx)("button",{type:"button",onClick:()=>x("FEMALE"),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${"FEMALE"===v?"border-pink-500 bg-pink-50 text-pink-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDC69 Perempuan"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Tanggal Lahir"}),(0,d.jsx)("input",{type:"date",value:y,onChange:a=>z(a.target.value),className:Z})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Tempat Lahir"}),(0,d.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),className:Z})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Status"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>{D(!0),F("")},className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${C?"border-green-500 bg-green-50 text-green-700":"border-surface-200 text-surface-500"}`,children:"❤️ Masih Hidup"}),(0,d.jsx)("button",{type:"button",onClick:()=>D(!1),className:`flex-1 py-2.5 rounded-xl border text-xs font-medium transition-all ${!C?"border-surface-500 bg-surface-100 text-surface-700":"border-surface-200 text-surface-500"}`,children:"\uD83D\uDD4A️ Sudah Wafat"})]})]}),!C&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Tanggal Wafat"}),(0,d.jsx)("input",{type:"date",value:E,onChange:a=>F(a.target.value),className:Z})]})]}),(0,d.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Relasi Keluarga"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Ayah"}),(0,d.jsxs)("select",{value:R,onChange:a=>S(a.target.value),className:Z,children:[(0,d.jsx)("option",{value:"",children:"-- Pilih Ayah --"}),X.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.fullName," (Gen. ",a.generation+1,")"]},a.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Ibu"}),(0,d.jsxs)("select",{value:T,onChange:a=>U(a.target.value),className:Z,children:[(0,d.jsx)("option",{value:"",children:"-- Pilih Ibu --"}),Y.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.fullName," (Gen. ",a.generation+1,")"]},a.id))]})]})]}),(0,d.jsxs)("div",{className:"space-y-3 pt-2 border-t border-surface-100",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-surface-400 uppercase tracking-wider",children:"Kontak & Alamat"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"No. WhatsApp"}),(0,d.jsx)("input",{type:"tel",value:K,onChange:a=>L(a.target.value),className:Z,placeholder:"08xxxxxxxxxx"})]}),(0,d.jsx)(Q,{entries:M,onChange:N,inputClass:Z,labelClass:$}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Alamat"}),(0,d.jsx)("input",{type:"text",value:G,onChange:a=>H(a.target.value),className:Z})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Kota"}),(0,d.jsx)("input",{type:"text",value:I,onChange:a=>J(a.target.value),className:Z})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:$,children:"Bio / Catatan"}),(0,d.jsx)("textarea",{value:O,onChange:a=>P(a.target.value),rows:2,className:`${Z} resize-none`})]})]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 px-5 py-4 border-t border-surface-100 flex-shrink-0",children:[(0,d.jsx)("button",{type:"button",onClick:W,disabled:n,className:"px-3 py-2.5 rounded-xl border border-red-200 text-red-600 hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center gap-1",children:n?(0,d.jsx)(l.A,{className:"w-4 h-4 animate-spin"}):(0,d.jsx)(w.A,{className:"w-4 h-4"})}),(0,d.jsx)("button",{type:"button",onClick:f,className:"flex-1 py-2.5 rounded-xl border border-surface-200 text-surface-600 font-medium text-sm hover:bg-surface-50 transition-colors",children:"Batal"}),(0,d.jsx)("button",{type:"submit",form:"edit-member-form",disabled:k,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 text-white font-semibold text-sm hover:from-primary-500 hover:to-primary-600 transition-all shadow-lg shadow-primary-600/20 disabled:opacity-50 flex items-center justify-center gap-2",children:k?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"w-4 h-4 animate-spin"}),"Menyimpan..."]}):"Simpan"})]})]})]})]})}function Y({baniId:a,baniName:b,members:c,canEdit:f,initialOrientation:i="VERTICAL",initialIsPublic:j=!1,initialShowWa:k=!1,initialShowBirth:l=!1,initialShowAddress:o=!1,initialShowSocmed:p=!1}){let q,r,s,[t,w]=(0,e.useState)("tree"),[Q,Y]=(0,e.useState)([]),[Z,$]=(0,e.useState)(!0),[_,aa]=(0,e.useState)(new Set),[ab,ac]=(0,e.useState)(null),[ad,ae]=(0,e.useState)(1),af=(0,e.useRef)(null),ag=(0,e.useRef)(null),[ah,ai]=(0,e.useState)(!1),[aj,ak]=(0,e.useState)(null),[al,am]=(0,e.useState)(null),[an,ao]=(0,e.useState)(null),[ap,aq]=(0,e.useState)(!1),[ar,as]=(0,e.useState)(null),[at,au]=(0,e.useState)(!1),[av,aw]=(0,e.useState)(i),[ax,ay]=(0,e.useState)(j),[az,aA]=(0,e.useState)(!1),[aB,aC]=(0,e.useState)(!1),[aD,aE]=(0,e.useState)(k),[aF,aG]=(0,e.useState)(l),[aH,aI]=(0,e.useState)(o),[aJ,aK]=(0,e.useState)(p),aL=(0,e.useCallback)(async()=>{try{let b=await fetch(`/api/members?baniId=${a}`),c=await b.json();Y(c);let d=new Set;c.forEach(a=>{a.generation<=1&&d.add(a.id)}),aa(d)}catch(a){console.error("Failed to fetch:",a)}finally{$(!1)}},[a]),aM=function(a,b){let c;if(0===a.length)return null;let d=new Map;return a.forEach(a=>d.set(a.id,a)),c||(c=a.find(a=>0===a.generation)),c||(c=a.reduce((a,b)=>a.generation<b.generation?a:b)),function b(c){let d=a.filter(a=>a.fatherId===c.id||a.motherId===c.id).filter((a,b,c)=>c.findIndex(b=>b.id===a.id)===b).sort((a,b)=>a.fullName.localeCompare(b.fullName));return{...c,children:d.map(a=>b(a))}}(c)}(Q),aN=(0,e.useCallback)(a=>{aa(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),aO=ab?Q.find(a=>a.id===ab):null,aP=()=>ae(a=>Math.min(a+.1,2)),aQ=()=>ae(a=>Math.max(a-.1,.3)),aR=()=>ae(1),aS=(0,e.useCallback)(()=>{af.current&&(document.fullscreenElement?document.exitFullscreen():af.current.requestFullscreen().catch(a=>{console.error("Fullscreen error:",a)}))},[]),aT=(0,e.useRef)(ad);aT.current=ad;let aU=(0,e.useRef)(new Map),aV=(0,e.useRef)(0),aW=(0,e.useRef)(1),aX=(0,e.useCallback)(a=>{if(aU.current.set(a.pointerId,{x:a.clientX,y:a.clientY}),a.target.setPointerCapture?.(a.pointerId),2===aU.current.size){let a=Array.from(aU.current.values()),b=a[0].x-a[1].x,c=a[0].y-a[1].y;aV.current=Math.sqrt(b*b+c*c),aW.current=aT.current}},[]),aY=(0,e.useCallback)(a=>{if(aU.current.has(a.pointerId)&&(aU.current.set(a.pointerId,{x:a.clientX,y:a.clientY}),2===aU.current.size&&aV.current>0)){a.preventDefault();let b=Array.from(aU.current.values()),c=b[0].x-b[1].x,d=b[0].y-b[1].y,e=Math.sqrt(c*c+d*d)/aV.current;ae(Math.round(100*Math.min(Math.max(aW.current*e,.2),3))/100)}},[]),aZ=(0,e.useCallback)(a=>{aU.current.delete(a.pointerId),aU.current.size<2&&(aV.current=0)},[]),a$=(0,e.useCallback)((a,b)=>{ak({type:b,member:a})},[]),a_=(0,e.useCallback)(a=>{am(a)},[]),a0=(0,e.useCallback)(a=>{al&&(a$(al,a),am(null))},[al,a$]),a1=(0,e.useCallback)(()=>{ak(null),aL()},[aL]),a2=(0,e.useCallback)(()=>{aL(),window.location.reload()},[aL]),a3=(0,e.useCallback)(async(b,c,d)=>{aA(!0);try{await fetch(`/api/banis/${a}/settings`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({treeOrientation:b,isPublic:c,...d})}),aw(b),ay(c),d?.showWaPublic!==void 0&&aE(d.showWaPublic),d?.showBirthPublic!==void 0&&aG(d.showBirthPublic),d?.showAddressPublic!==void 0&&aI(d.showAddressPublic),d?.showSocmedPublic!==void 0&&aK(d.showSocmedPublic)}catch(a){console.error("Save settings error:",a)}finally{aA(!1)}},[a]),a4=(0,e.useCallback)(async()=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText("");else{let a=document.createElement("textarea");a.value="",a.style.position="fixed",a.style.left="-9999px",a.style.top="-9999px",document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a)}aC(!0),setTimeout(()=>aC(!1),2e3)}catch{window.prompt("Salin link ini:","")}},[""]);return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("div",{className:"flex rounded-xl bg-surface-100 p-1 flex-1",children:[(0,d.jsxs)("button",{onClick:()=>w("tree"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${"tree"===t?"bg-white text-primary-700 shadow-sm":"text-surface-500 hover:text-surface-700"}`,children:[(0,d.jsx)(x.A,{className:"w-4 h-4"}),"Pohon Nasab"]}),(0,d.jsxs)("button",{onClick:()=>w("list"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${"list"===t?"bg-white text-primary-700 shadow-sm":"text-surface-500 hover:text-surface-700"}`,children:[(0,d.jsx)(y.A,{className:"w-4 h-4"}),"Daftar (",c.length,")"]})]}),f&&(0,d.jsx)("button",{onClick:()=>au(!0),className:"p-2.5 rounded-xl bg-white border border-surface-200 shadow-sm hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Pengaturan",children:(0,d.jsx)(z.A,{className:"w-4 h-4 text-surface-500"})}),"tree"===t&&(0,d.jsxs)("div",{className:"hidden sm:flex items-center gap-3 ml-auto",children:[(0,d.jsxs)("div",{className:"flex items-center bg-white rounded-xl border border-surface-200 shadow-sm overflow-hidden",children:[(0,d.jsx)("button",{onClick:aQ,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Perkecil",children:(0,d.jsx)(A.A,{className:"w-4 h-4 text-surface-500"})}),(0,d.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,d.jsx)("button",{onClick:aR,className:"px-3 py-2 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Reset zoom",children:(0,d.jsxs)("span",{className:"text-xs font-semibold text-primary-600 min-w-[2.5rem] text-center block",children:[Math.round(100*ad),"%"]})}),(0,d.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,d.jsx)("button",{onClick:aP,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:"Perbesar",children:(0,d.jsx)(B.A,{className:"w-4 h-4 text-surface-500"})}),(0,d.jsx)("div",{className:"w-px h-5 bg-surface-200"}),(0,d.jsx)("button",{onClick:aS,className:"p-2.5 hover:bg-surface-50 active:bg-surface-100 transition-colors",title:ah?"Keluar layar penuh":"Layar penuh",children:ah?(0,d.jsx)(C.A,{className:"w-4 h-4 text-surface-500"}):(0,d.jsx)(D.A,{className:"w-4 h-4 text-surface-500"})})]}),(0,d.jsx)(M.A,{treeContainerRef:ag,baniName:b||"Pohon-Nasab"})]}),f&&"list"===t&&(0,d.jsxs)("button",{onClick:()=>aq(!0),className:"hidden sm:inline-flex ml-auto touch-target items-center gap-2 px-4 py-2 rounded-xl bg-primary-600 text-white font-medium text-sm hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20",children:[(0,d.jsx)(h.A,{className:"w-4 h-4"}),"Tambah"]})]}),f&&"list"===t&&(0,d.jsxs)("button",{onClick:()=>aq(!0),className:"sm:hidden inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-primary-600 text-white font-medium text-xs hover:bg-primary-500 transition-colors shadow-md shadow-primary-600/20",children:[(0,d.jsx)(h.A,{className:"w-3.5 h-3.5"}),"Tambah Anggota"]})]}),"tree"===t?(0,d.jsx)(d.Fragment,{children:Z?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[40vh] sm:min-h-[60vh]",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-surface-500 text-sm",children:"Memuat pohon nasab..."})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"sm:hidden",children:(0,d.jsx)(M.A,{treeContainerRef:ag,baniName:b||"Pohon-Nasab"})}),(0,d.jsxs)("div",{ref:af,className:"relative overflow-auto rounded-xl sm:rounded-2xl bg-white border border-surface-200 min-h-[40vh] sm:min-h-[60vh] p-3 sm:p-8",style:{touchAction:"pan-x pan-y"},onPointerDown:aX,onPointerMove:aY,onPointerUp:aZ,onPointerCancel:aZ,children:[(0,d.jsxs)("div",{className:"sm:hidden fixed bottom-20 right-3 z-30 flex flex-col gap-2",children:[(0,d.jsx)("button",{onClick:aP,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Perbesar",children:(0,d.jsx)(B.A,{className:"w-4 h-4 text-surface-600"})}),(0,d.jsx)("button",{onClick:aR,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Reset zoom",children:(0,d.jsxs)("span",{className:"text-[10px] font-bold text-primary-600",children:[Math.round(100*ad),"%"]})}),(0,d.jsx)("button",{onClick:aQ,className:"w-10 h-10 rounded-full bg-white border border-surface-200 shadow-lg flex items-center justify-center active:bg-surface-100 transition-colors",title:"Perkecil",children:(0,d.jsx)(A.A,{className:"w-4 h-4 text-surface-600"})}),(0,d.jsx)("button",{onClick:aS,className:"w-10 h-10 rounded-full bg-primary-600 shadow-lg shadow-primary-600/30 flex items-center justify-center active:bg-primary-500 transition-colors",title:ah?"Keluar layar penuh":"Layar penuh",children:ah?(0,d.jsx)(C.A,{className:"w-4 h-4 text-white"}):(0,d.jsx)(D.A,{className:"w-4 h-4 text-white"})})]}),(0,d.jsx)("div",{ref:ag,className:"min-w-fit",children:(0,d.jsx)("div",{style:{transform:`scale(${ad})`,transformOrigin:"top left"},className:"flex justify-center min-w-fit",children:aM?(0,d.jsx)(T,{node:aM,level:0,expanded:_,toggleExpand:aN,selectedId:ab,onSelect:ac,onShowQuickMenu:a_,canEdit:f,orientation:av}):(0,d.jsx)("div",{className:"text-center py-20",children:(0,d.jsx)("p",{className:"text-surface-500",children:"Belum ada anggota di pohon ini"})})})})]}),aO&&(q=a=>{if(!a)return null;try{return new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch{return a}},r=[],(aO.birthPlace||aO.birthDate)&&r.push([aO.birthPlace,q(aO.birthDate)].filter(Boolean).join(", ")),aO.city&&r.push(aO.city),aO.deathDate&&r.push("Wafat "+q(aO.deathDate)),(0,d.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2.5 rounded-xl border border-surface-200 bg-white shadow-sm animate-scale-in",children:[(0,d.jsx)("div",{className:`w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 ${"MALE"===aO.gender?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:aO.photo?(0,d.jsx)("img",{src:aO.photo,alt:aO.fullName,className:"w-9 h-9 rounded-full object-cover"}):(0,d.jsx)(m.A,{className:"w-4 h-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,d.jsx)("span",{className:"font-semibold text-sm text-surface-900 truncate",children:aO.fullName}),aO.nickname&&(0,d.jsxs)("span",{className:"text-xs text-surface-400 truncate",children:["“",aO.nickname,"”"]}),!aO.isAlive&&(0,d.jsxs)("span",{className:"text-[10px] bg-surface-100 text-surface-400 px-1 py-0.5 rounded",children:["Alm","FEMALE"===aO.gender?"h":"","."]}),(0,d.jsxs)("span",{className:"text-[10px] text-surface-400 bg-surface-50 px-1.5 py-0.5 rounded",children:["Gen ",aO.generation]})]}),r.length>0&&(0,d.jsx)("p",{className:"text-[11px] text-surface-400 truncate mt-0.5",children:r.join(" \xb7 ")})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[aO.phoneWhatsapp&&(0,d.jsx)("a",{href:(0,L.rr)(aO.phoneWhatsapp),target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 rounded-lg bg-green-500 text-white flex items-center justify-center hover:bg-green-400 transition-colors",title:"WhatsApp",children:(0,d.jsx)(n.A,{className:"w-3 h-3"})}),(s=aO.socialMedia)?Object.entries(s).filter(([,a])=>a).map(([a])=>{let b=N.find(b=>b.key===a);return b?(0,d.jsx)("a",{href:O(a,s[a]),target:"_blank",rel:"noopener noreferrer",className:`w-7 h-7 rounded-lg ${b.bg} ${b.color} flex items-center justify-center hover:opacity-80 transition-opacity`,title:`${b.label}: ${s[a]}`,children:(0,d.jsx)(P,{platform:a,className:"w-3 h-3"})},a):null}):null,f&&(0,d.jsx)("button",{onClick:()=>as(aO.id),className:"w-7 h-7 rounded-lg border border-surface-200 text-surface-500 flex items-center justify-center hover:bg-surface-50 transition-colors",title:"Edit",children:(0,d.jsx)(v.A,{className:"w-3 h-3"})}),(0,d.jsx)("button",{onClick:()=>ac(null),className:"w-7 h-7 rounded-lg border border-surface-200 text-surface-400 flex items-center justify-center hover:bg-surface-50 transition-colors",title:"Tutup",children:(0,d.jsx)(g.A,{className:"w-3 h-3"})})]})]}))]})}):(0,d.jsx)(U,{members:c,baniId:a,onSelectMember:ao}),al&&(0,d.jsx)(R,{node:al,onSelect:a0,onClose:()=>am(null)}),aj&&(0,d.jsx)(S,{context:aj,allMembers:Q,baniId:a,onClose:()=>ak(null),onSuccess:a1}),an&&(0,d.jsx)(V,{member:an,baniId:a,onClose:()=>ao(null),onEdit:a=>as(a)}),ar&&(0,d.jsx)(X,{memberId:ar,baniId:a,allMembers:c,onClose:()=>as(null),onSuccess:()=>{as(null),aL(),window.location.reload()}}),ap&&(0,d.jsx)(W,{baniId:a,existingMembers:c,onClose:()=>aq(!1),onSuccess:a2}),at&&(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>au(!1)}),(0,d.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-sm animate-scale-in",children:[(0,d.jsxs)("div",{className:"px-6 py-4 border-b border-surface-100 flex items-center justify-between",children:[(0,d.jsxs)("h2",{className:"text-lg font-bold text-surface-900 flex items-center gap-2",children:[(0,d.jsx)(z.A,{className:"w-5 h-5 text-primary-600"})," Pengaturan Tree"]}),(0,d.jsx)("button",{onClick:()=>au(!1),className:"p-1.5 rounded-lg hover:bg-surface-100 transition-colors",children:(0,d.jsx)(g.A,{className:"w-5 h-5 text-surface-400"})})]}),(0,d.jsxs)("div",{className:"p-6 space-y-5",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block flex items-center gap-1.5",children:[(0,d.jsx)(E.A,{className:"w-3.5 h-3.5"})," Orientasi Pohon"]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsx)("button",{onClick:()=>a3("VERTICAL",ax),disabled:az,className:`p-4 rounded-xl border-2 transition-all text-center ${"VERTICAL"===av?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsxs)("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("circle",{cx:"16",cy:"4",r:"3",className:"VERTICAL"===av?"fill-primary-500":"fill-surface-300"}),(0,d.jsx)("line",{x1:"16",y1:"7",x2:"16",y2:"16",className:"VERTICAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"8",y1:"16",x2:"24",y2:"16",className:"VERTICAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"22",className:"VERTICAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"24",y1:"16",x2:"24",y2:"22",className:"VERTICAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("circle",{cx:"8",cy:"25",r:"3",className:"VERTICAL"===av?"fill-primary-400":"fill-surface-300"}),(0,d.jsx)("circle",{cx:"24",cy:"25",r:"3",className:"VERTICAL"===av?"fill-primary-400":"fill-surface-300"})]}),(0,d.jsx)("span",{className:`text-xs font-medium ${"VERTICAL"===av?"text-primary-700":"text-surface-500"}`,children:"Vertikal"})]})}),(0,d.jsx)("button",{onClick:()=>a3("HORIZONTAL",ax),disabled:az,className:`p-4 rounded-xl border-2 transition-all text-center ${"HORIZONTAL"===av?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsxs)("svg",{className:"w-8 h-8",viewBox:"0 0 32 32",fill:"none",children:[(0,d.jsx)("circle",{cx:"4",cy:"16",r:"3",className:"HORIZONTAL"===av?"fill-primary-500":"fill-surface-300"}),(0,d.jsx)("line",{x1:"7",y1:"16",x2:"16",y2:"16",className:"HORIZONTAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"16",y1:"8",x2:"16",y2:"24",className:"HORIZONTAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"16",y1:"8",x2:"22",y2:"8",className:"HORIZONTAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("line",{x1:"16",y1:"24",x2:"22",y2:"24",className:"HORIZONTAL"===av?"stroke-primary-400":"stroke-surface-300",strokeWidth:"2"}),(0,d.jsx)("circle",{cx:"25",cy:"8",r:"3",className:"HORIZONTAL"===av?"fill-primary-400":"fill-surface-300"}),(0,d.jsx)("circle",{cx:"25",cy:"24",r:"3",className:"HORIZONTAL"===av?"fill-primary-400":"fill-surface-300"})]}),(0,d.jsx)("span",{className:`text-xs font-medium ${"HORIZONTAL"===av?"text-primary-700":"text-surface-500"}`,children:"Horizontal"})]})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block flex items-center gap-1.5",children:[ax?(0,d.jsx)(F.A,{className:"w-3.5 h-3.5"}):(0,d.jsx)(G.A,{className:"w-3.5 h-3.5"})," Visibilitas"]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("button",{onClick:()=>a3(av,!1),disabled:az,className:`w-full flex items-center gap-3 p-3 rounded-xl border-2 transition-all text-left ${!ax?"border-primary-500 bg-primary-50":"border-surface-200 hover:border-surface-300"}`,children:[(0,d.jsx)(G.A,{className:`w-5 h-5 ${!ax?"text-primary-600":"text-surface-300"}`}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:`text-sm font-medium ${!ax?"text-primary-700":"text-surface-600"}`,children:"Privat"}),(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Hanya anggota yang bisa melihat"})]})]}),(0,d.jsxs)("button",{onClick:()=>a3(av,!0),disabled:az,className:`w-full flex items-center gap-3 p-3 rounded-xl border-2 transition-all text-left ${ax?"border-green-500 bg-green-50":"border-surface-200 hover:border-surface-300"}`,children:[(0,d.jsx)(F.A,{className:`w-5 h-5 ${ax?"text-green-600":"text-surface-300"}`}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:`text-sm font-medium ${ax?"text-green-700":"text-surface-600"}`,children:"Publik"}),(0,d.jsx)("p",{className:"text-[11px] text-surface-400",children:"Siapapun dengan link bisa melihat pohon"})]})]})]}),ax&&(0,d.jsxs)("div",{className:"mt-3 p-3 rounded-lg bg-green-50 border border-green-200",children:[(0,d.jsx)("p",{className:"text-[11px] text-green-700 font-medium mb-2",children:"Link Publik:"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("input",{type:"text",readOnly:!0,value:"",className:"flex-1 px-2.5 py-1.5 rounded-lg bg-white border border-green-200 text-xs text-surface-700 truncate"}),(0,d.jsxs)("button",{onClick:a4,className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-green-600 text-white text-xs font-medium hover:bg-green-500 transition-colors flex-shrink-0",children:[aB?(0,d.jsx)(H.A,{className:"w-3.5 h-3.5"}):(0,d.jsx)(I.A,{className:"w-3.5 h-3.5"}),aB?"Tersalin!":"Salin"]})]})]}),ax&&(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-surface-200",children:[(0,d.jsx)("label",{className:"text-xs font-semibold text-surface-500 uppercase tracking-wider mb-3 block",children:"Data Ditampilkan di Publik"}),(0,d.jsx)("div",{className:"space-y-2",children:[{key:"showWaPublic",label:"Nomor WhatsApp",value:aD,iconComponent:(0,d.jsx)(J.A,{className:"w-4 h-4 text-green-500"}),iconBg:"bg-green-50"},{key:"showBirthPublic",label:"Tanggal Lahir",value:aF,iconComponent:(0,d.jsx)(K.A,{className:"w-4 h-4 text-blue-500"}),iconBg:"bg-blue-50"},{key:"showAddressPublic",label:"Alamat",value:aH,iconComponent:(0,d.jsx)(u.A,{className:"w-4 h-4 text-red-500"}),iconBg:"bg-red-50"},{key:"showSocmedPublic",label:"Sosial Media",value:aJ,iconComponent:(0,d.jsx)(F.A,{className:"w-4 h-4 text-purple-500"}),iconBg:"bg-purple-50"}].map(a=>(0,d.jsxs)("button",{onClick:()=>a3(av,!0,{[a.key]:!a.value}),disabled:az,className:"w-full flex items-center justify-between p-2.5 rounded-lg border border-surface-200 hover:bg-surface-50 transition-all",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2.5 text-sm text-surface-700",children:[(0,d.jsx)("span",{className:`w-7 h-7 rounded-lg ${a.iconBg} flex items-center justify-center flex-shrink-0`,children:a.iconComponent}),(0,d.jsx)("span",{className:"font-medium",children:a.label})]}),(0,d.jsx)("div",{className:`w-9 h-5 rounded-full transition-colors relative ${a.value?"bg-green-500":"bg-surface-300"}`,children:(0,d.jsx)("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform ${a.value?"translate-x-4":"translate-x-0.5"}`})})]},a.key))})]})]}),az&&(0,d.jsx)("p",{className:"text-xs text-primary-500 text-center animate-pulse",children:"Menyimpan..."})]})]})]})]})}}};